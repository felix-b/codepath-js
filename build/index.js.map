{"version":3,"sources":["webpack://CodePath/webpack/universalModuleDefinition","webpack://CodePath/webpack/bootstrap","webpack://CodePath/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/construct.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/createClass.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/inherits.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/typeof.js","webpack://CodePath/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://CodePath/./node_modules/opentracing/lib/binary_carrier.js","webpack://CodePath/./node_modules/opentracing/lib/constants.js","webpack://CodePath/./node_modules/opentracing/lib/ext/tags.js","webpack://CodePath/./node_modules/opentracing/lib/functions.js","webpack://CodePath/./node_modules/opentracing/lib/global_tracer.js","webpack://CodePath/./node_modules/opentracing/lib/index.js","webpack://CodePath/./node_modules/opentracing/lib/mock_tracer/index.js","webpack://CodePath/./node_modules/opentracing/lib/mock_tracer/mock_context.js","webpack://CodePath/./node_modules/opentracing/lib/mock_tracer/mock_report.js","webpack://CodePath/./node_modules/opentracing/lib/mock_tracer/mock_span.js","webpack://CodePath/./node_modules/opentracing/lib/mock_tracer/mock_tracer.js","webpack://CodePath/./node_modules/opentracing/lib/noop.js","webpack://CodePath/./node_modules/opentracing/lib/reference.js","webpack://CodePath/./node_modules/opentracing/lib/span.js","webpack://CodePath/./node_modules/opentracing/lib/span_context.js","webpack://CodePath/./node_modules/opentracing/lib/tracer.js","webpack://CodePath/./src/asyncLocalProvider.js","webpack://CodePath/./src/codePath.js","webpack://CodePath/./src/codePathFlatFilterModel.js","webpack://CodePath/./src/codePathModel.js","webpack://CodePath/./src/codePathScopeManager.js","webpack://CodePath/./src/codePathSearchModel.js","webpack://CodePath/./src/codePathSpanStats.js","webpack://CodePath/./src/codePathStream.js","webpack://CodePath/./src/codePathTracer.js","webpack://CodePath/./src/debounce.js","webpack://CodePath/./src/debugLog.js","webpack://CodePath/./src/index.js","webpack://CodePath/./src/logLevel.js","webpack://CodePath/./src/multicastDelegate.js","webpack://CodePath/./src/resizer.js","webpack://CodePath/./src/serializable.js","webpack://CodePath/./src/treeGrid.js"],"names":["originalPromise","window","Promise","restoreOriginalPromise","createAsyncLocalProvider","currentLocals","Map","getCurrentLocals","cloneCurrentLocals","entries","completionHooks","createMulticastDelegate","rejectionHooks","nextInstanceId","PromiseWrapper","executor","parentLocals","thisLocals","thisInstanceId","resolve","reject","wrapperResolve","value","invoke","wrapperReject","error","createAsyncLocal","initialValue","key","set","get","newValue","remove","addPromiseCompletionHook","callback","add","addPromiseRejectionHook","createRealClock","now","performance","epoch","Date","getTime","setInterval","func","delay","clearInterval","id","setTimeout","clearTimeout","noopTracerFactory","Tracer","defaultTracerFactory","stream","options","createCodePathTracer","clock","GlobalCodePath","configure","createCodePath","input","output","Object","assign","getOutputStream","Error","getAsyncLocalProvider","asyncLocalProvider","scopeManager","createDefaultScopeManager","tracerFactory","outputStream","createCodePathStream","undefined","spanEntries","getOrCreateActiveTracer","existingTracer","getActiveTracer","newTracer","setActiveTracer","getParentSpanContext","parentContext","existingSpan","getActiveSpan","context","logToActiveSpan","tags","log","activeTracer","tempSpan","startSpan","finish","parentReferenceType","tracer","parentReferenceContext","spanOptions","references","Reference","childSpan","setActiveSpan","childSpanId","toSpanId","span","thisCodePath","logDebug","$id","level","LOG_LEVEL","debug","logEvent","event","logWarning","warning","logError","logCritical","critical","spanRoot","spanChild","REFERENCE_CHILD_OF","spanFollower","REFERENCE_FOLLOWS_FROM","finishSpan","activeSpan","doesNotifyTracerOnFinish","notifySpanFinished","spanContext","spanId","traceId","toTraceId","entry","referencedContext","parentEntry","clearAll","createCodePathFlatFilterModel","sourceModel","predicate","insertNodesCallbacks","updateNodesCallbacks","resultNodeById","newlyCreatedResultNodes","resultRootNode","initializeFromSourceModel","performSearch","sourceModelSubscriber","insertNodes","handleInsertedSourceNodes","updateNodes","handleUpdatedSourceNodes","subscribe","getRootNode","getNodesFlat","getNodesAsFlatArray","getTopLevelNodes","getTopLevelNodesAsArray","getFirstMatchedNode","firstMatchedNode","walkNodesDepthFirst","node","matched","getNextMatchedNode","matchedNode","findNextMatchingNode","getPrevMatchedNode","findPrevMatchingNode","subscriber","unsubscribe","unsubscribeFromSource","sourceRootNode","createRootNode","depthFirstSearchSubTree","getResultParentNode","createThisResultNode","createResultNode","isRootNode","parent","thisNodeMatched","thisResultNode","subNode","firstChild","nextSibling","sourceNode","resultParentNode","resultNode","createRegularNode","extractEntryMetrics","push","appendChildNodeToParent","insertedNodes","matchingNodes","filter","forEach","length","updatedNodes","createCodePathModel","metrics","traceNodeMap","rootNode","nextNodeId","initializeModel","createTraceNodeMap","getParentContext","token","childOf","followsFrom","findParentNode","parentNode","getSpanNode","console","warn","bubbleSingleMetric","targetNode","bubbleMetrics","insertQueue","updateQueue","insertSet","Set","metricKeys","keys","has","handleInsertNodeEntry","newNode","setSpanNode","handleSpanTagsEntry","$$id","currentTagsIds","newTagsIds","Array","isArray","handleEndSpanEntry","duration","time","handleStartTracerEntry","entryHandlerByToken","StartTracer","StartSpan","Log","SpanTags","EndSpan","handleEntry","handler","publish","top","depth","lastChild","prevSibling","newChild","flatNodes","topLevelNodes","walkImmediateSubNodes","fromNode","currentNode","finishedSubTree","mapByTraceId","getOrAddTraceSpanNodeMap","existingMap","newMap","createSpanNodeMap","spanNodeMap","nodeBySpanId","$async","err","message","stack","resetCurrentScope","createCodePathSearchModel","matchHighlight","getOrCreateResultParentNode","sourceChildNode","existingParent","getParentNode","aggregateSpanStats","entryByMessageId","statsEntry","getOrAddEntry","messageId","count","totalDuration","statsLines","values","map","avgDuration","sort","a","b","existingEntry","newEntry","isStripTagsMode","stripTags","isEnabled","enabled","strippedTagsById","nextStrippedTagsId","writeStartTracer","includeOrStripTags","writeStartSpan","writeEndSpan","writeLog","writeSpanTags","enable","effectiveValue","peekEntries","takeEntries","copyOfEntries","normalizeTags","getStrippedTags","ids","result","visitedObjects","isTagSerializable","addTagMetaStringify","safeStringify","obj","json","JSON","stringify","replaceCircularReferences","substr","CodePathTracer","_traceId","_nextSpanId","_clock","_scopeManager","_stream","name","CodePathSpan","format","carrier","CodePathSpanContext","getTraceId","_tracer","_selfContext","_name","startTime","findReferences","contextToPlain","keyValuePairs","timestamp","finishTime","effectiveFinishTime","Span","_spanId","SpanContext","ref","type","plainToContext","createDebounce","consumer","interval","optionalClock","timeoutId","bounce","logSwitch","createDebugLog","component","globalVars","ensureLogSwitchInitialized","info","setEnabled","createSetEnabled","enableDebugLog","createEnableLogMessage","handleEnableLogMessage","postMessage","addEventListener","data","chrome","runtime","sendMessage","onMessage","addListener","request","sender","sendResponse","backgroundConnection","eventName","subscribers","delegate","s","args","e","createResizer","elements","minWidthPx","moveThresholdPx","gripElement","leftSideElement","rightSideElement","initial","last","saveBodyCursor","onmousedown","onMouseDown","takeSnapshot","mouseX","pageX","leftWidth","clientWidth","rightWidth","onMouseMove","onMouseUp","document","body","style","cursor","stopPropagation","current","Math","abs","deltaX","width","removeEventListener","i","tag","$meta","createTreeGridController","view","model","rowById","masterIndexVersion","handleInsertedNodes","handleUpdatedNodes","controller","getNodeById","row","getNode","toggle","expand","collapse","selectNode","expandToNode","nodeRow","nodeRowIndex","findAbsoluteIndex","getIsExpanded","getIsVisible","replaceModel","newModel","initWithCurrentModel","onNodeSelected","attachController","initRootNode","createSubNodesRowControllers","subNodes","createRowController","isExpanded","subTreeHeight","cachedAbsoluteIndex","cachedIndexVersion","getParent","getPrevSibling","getNextSibling","getFirstChild","getSubTreeHeight","updateSubTreeHeight","delta","getIndexVersion","isCachedAbsoluteIndexValid","indexRelativeToParent","sibling","parentAbsoluteIndex","showSubNodes","thisRowIndex","updateNode","hideSubNodes","removedNodeIds","removeNodes","createRootNodeController","noop","currentGroup","parentId","parentRow","beginNewGroup","endCurrentGroup","index","startIndex","nodesInGroup","slice","createTreeGridView","table","columns","rows","nodeSelectedCallbacks","keyPressedCallbacks","onkeydown","handleTableKeyboardEvent","defaultPrevented","tbody","createElement","appendChild","selectedTr","stringToTextNode","element","createTextNode","renderCell","rowIndex","colIndex","tr","td","column","tdClass","getTdClass","classList","tdContents","htmlNode","theController","applyTrClasses","className","getTrClasses","trClasses","cells","innerHTML","scrollIntoViewIfNeeded","nodes","insertRow","setAttribute","onclick","insertCell","deletedNodeIds","getTrNodeId","deleteRow","newTbody","replaceChild","onKeyPressed","ctrlKey","shiftKey","altKey","getTrNode","selectedNodeId","trToGo","getTrToGo","getTrIndex","keyCode","findParentTr","findExpandableChildTr","sectionRowIndex","nodeId","parseInt","getAttribute","isNaN","childTr","childNode","parentNodeId","parentTr"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;QCVA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA,iDAAiD,gBAAgB;AACjE;AACA;;AAEA;AACA;AACA;;AAEA,oC;;;;;;;;;;;ACVA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wC;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACNA,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA,2EAA2E;AAC3E;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4B;;;;;;;;;;;AChCA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,iC;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACPA,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,2B;;;;;;;;;;;ACjBA;AACA;AACA;;AAEA,mC;;;;;;;;;;;ACJA;AACA;AACA;;AAEA,kC;;;;;;;;;;;ACJA;AACA;AACA;;AAEA,oC;;;;;;;;;;;ACJA,cAAc,mBAAO,CAAC,0EAAmB;;AAEzC,4BAA4B,mBAAO,CAAC,+FAAyB;;AAE7D;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4C;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iC;;;;;;;;;;;ACTA,wBAAwB,mBAAO,CAAC,uFAAqB;;AAErD,sBAAsB,mBAAO,CAAC,mFAAmB;;AAEjD,wBAAwB,mBAAO,CAAC,uFAAqB;;AAErD;AACA;AACA;;AAEA,oC;;;;;;;;;;;ACVA,wBAAwB,2EAA2E,oCAAoC,mBAAmB,GAAG,EAAE,OAAO,oCAAoC,8HAA8H,GAAG,EAAE,sBAAsB;;AAEnW;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yB;;;;;;;;;;;AChBA,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,uBAAuB,mBAAO,CAAC,qFAAoB;;AAEnD,gBAAgB,mBAAO,CAAC,uEAAa;;AAErC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA,kC;;;;;;;;;;;;AC1Ca;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,0C;;;;;;;;;;;;ACfa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;AC9Da;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;;;;;AC3Ga;AACb,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,gEAAa;AACrC,kBAAkB,mBAAO,CAAC,gEAAa;AACvC,aAAa,mBAAO,CAAC,sDAAQ;AAC7B;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qC;;;;;;;;;;;;ACnCa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,eAAe,mBAAO,CAAC,0DAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yC;;;;;;;;;;;;ACvEa;AACb;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,uBAAuB,mBAAO,CAAC,0EAAkB;AACjD;AACA,WAAW,mBAAO,CAAC,8DAAY;AAC/B;AACA,WAAW,mBAAO,CAAC,sDAAQ;AAC3B,kBAAkB,mBAAO,CAAC,gEAAa;AACvC;AACA,aAAa,mBAAO,CAAC,sDAAQ;AAC7B;AACA,qBAAqB,mBAAO,CAAC,sEAAgB;AAC7C;AACA,eAAe,mBAAO,CAAC,0DAAU;AACjC;AACA,oBAAoB,mBAAO,CAAC,0EAAe;AAC3C;AACA,SAAS,mBAAO,CAAC,wEAAiB;AAClC,SAAS,mBAAO,CAAC,gEAAa;AAC9B,SAAS,mBAAO,CAAC,gEAAa;AAC9B;AACA;AACA,iC;;;;;;;;;;;;ACzBa;AACb,8CAA8C,cAAc;AAC5D,qBAAqB,mBAAO,CAAC,kFAAgB;AAC7C;AACA,kBAAkB,mBAAO,CAAC,4EAAa;AACvC;AACA,oBAAoB,mBAAO,CAAC,gFAAe;AAC3C;AACA,iC;;;;;;;;;;;;ACRa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,kBAAkB,mBAAO,CAAC,yDAAU;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,wC;;;;;;;;;;;;ACpCa;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,uC;;;;;;;;;;;;AC5Ca;AACb;AACA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D,kBAAkB,mBAAO,CAAC,yDAAU;AACpC,qBAAqB,mBAAO,CAAC,kFAAgB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,qC;;;;;;;;;;;;ACtGa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA,kBAAkB,mBAAO,CAAC,yDAAU;AACpC,oBAAoB,mBAAO,CAAC,gFAAe;AAC3C,kBAAkB,mBAAO,CAAC,4EAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gBAAgB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,uC;;;;;;;;;;;;AC9Ea;AACb,8CAA8C,cAAc;AAC5D,aAAa,mBAAO,CAAC,sDAAQ;AAC7B,qBAAqB,mBAAO,CAAC,sEAAgB;AAC7C,eAAe,mBAAO,CAAC,0DAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;;;;;AChBa;AACb,8CAA8C,cAAc;AAC5D,aAAa,mBAAO,CAAC,sDAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,qC;;;;;;;;;;;;AC1Ca;AACb,8CAA8C,cAAc;AAC5D,WAAW,mBAAO,CAAC,sDAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,IAAI;AACnB;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,YAAY;AACZ;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qCAAqC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,gC;;;;;;;;;;;;AC9Ma;AACb,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,wC;;;;;;;;;;;;ACpCa;AACb,8CAA8C,cAAc;AAC5D,gBAAgB,mBAAO,CAAC,gEAAa;AACrC,WAAW,mBAAO,CAAC,sDAAQ;AAC3B,aAAa,mBAAO,CAAC,sDAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA,eAAe,OAAO;AACtB,eAAe,YAAY;AAC3B,gBAAgB,KAAK;AACrB;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,YAAY;AAC5B;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,oBAAoB;AACzE;AACA,gBAAgB,OAAO;AACvB,gBAAgB,IAAI;AACpB;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,kC;;;;;;;;;;;;;;;;;;;;;;;;;;AClJA;;AAEA,IAAMA,eAAe,GAAGC,MAAM,CAACC,OAA/B;;AAEO,SAASC,sBAAT,GAAkC;AACvCF,QAAM,CAACC,OAAP,GAAiBF,eAAjB;AACD;;AAEM,SAASI,wBAAT,GAAoC;AACzC,MAAIC,aAAa,GAAG,IAAIC,GAAJ,EAApB;;AAEA,MA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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"CodePath\"] = factory();\n\telse\n\t\troot[\"CodePath\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Convenience class to use as a binary carrier.\n *\n * Any valid Object with a field named `buffer` may be used as a binary carrier;\n * this class is only one such type of object that can be used.\n */\nvar BinaryCarrier = /** @class */ (function () {\n    function BinaryCarrier(buffer) {\n        this.buffer = buffer;\n    }\n    return BinaryCarrier;\n}());\nexports.default = BinaryCarrier;\n//# sourceMappingURL=binary_carrier.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The FORMAT_BINARY format represents SpanContexts in an opaque binary\n * carrier.\n *\n * Tracer.inject() will set the buffer field to an Array-like (Array,\n * ArrayBuffer, or TypedBuffer) object containing the injected binary data.\n * Any valid Object can be used as long as the buffer field of the object\n * can be set.\n *\n * Tracer.extract() will look for `carrier.buffer`, and that field is\n * expected to be an Array-like object (Array, ArrayBuffer, or\n * TypedBuffer).\n */\nexports.FORMAT_BINARY = 'binary';\n/**\n * The FORMAT_TEXT_MAP format represents SpanContexts using a\n * string->string map (backed by a Javascript Object) as a carrier.\n *\n * NOTE: Unlike FORMAT_HTTP_HEADERS, FORMAT_TEXT_MAP places no restrictions\n * on the characters used in either the keys or the values of the map\n * entries.\n *\n * The FORMAT_TEXT_MAP carrier map may contain unrelated data (e.g.,\n * arbitrary gRPC metadata); as such, the Tracer implementation should use\n * a prefix or other convention to distinguish Tracer-specific key:value\n * pairs.\n */\nexports.FORMAT_TEXT_MAP = 'text_map';\n/**\n * The FORMAT_HTTP_HEADERS format represents SpanContexts using a\n * character-restricted string->string map (backed by a Javascript Object)\n * as a carrier.\n *\n * Keys and values in the FORMAT_HTTP_HEADERS carrier must be suitable for\n * use as HTTP headers (without modification or further escaping). That is,\n * the keys have a greatly restricted character set, casing for the keys\n * may not be preserved by various intermediaries, and the values should be\n * URL-escaped.\n *\n * The FORMAT_HTTP_HEADERS carrier map may contain unrelated data (e.g.,\n * arbitrary HTTP headers); as such, the Tracer implementation should use a\n * prefix or other convention to distinguish Tracer-specific key:value\n * pairs.\n */\nexports.FORMAT_HTTP_HEADERS = 'http_headers';\n/**\n * A Span may be the \"child of\" a parent Span. In a “child of” reference,\n * the parent Span depends on the child Span in some capacity.\n *\n * See more about reference types at https://github.com/opentracing/specification\n */\nexports.REFERENCE_CHILD_OF = 'child_of';\n/**\n * Some parent Spans do not depend in any way on the result of their child\n * Spans. In these cases, we say merely that the child Span “follows from”\n * the parent Span in a causal sense.\n *\n * See more about reference types at https://github.com/opentracing/specification\n */\nexports.REFERENCE_FOLLOWS_FROM = 'follows_from';\n//# sourceMappingURL=constants.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** SPAN_KIND hints at relationship between spans, e.g. client/server */\nexports.SPAN_KIND = 'span.kind';\n/** Marks a span representing the client-side of an RPC or other remote call */\nexports.SPAN_KIND_RPC_CLIENT = 'client';\n/** Marks a span representing the server-side of an RPC or other remote call */\nexports.SPAN_KIND_RPC_SERVER = 'server';\n/** Marks a span representing the producing-side within a messaging system or other remote call */\nexports.SPAN_KIND_MESSAGING_PRODUCER = 'producer';\n/** Marks a span representing the consuming-side within a messaging system or other remote call */\nexports.SPAN_KIND_MESSAGING_CONSUMER = 'consumer';\n/**\n * ERROR (boolean) true if and only if the application considers the operation\n * represented by the Span to have failed\n */\nexports.ERROR = 'error';\n/**\n * COMPONENT (string) ia s low-cardinality identifier of the module, library,\n * or package that is generating a span.\n */\nexports.COMPONENT = 'component';\n/**\n * SAMPLING_PRIORITY (number) determines the priority of sampling this Span.\n * If greater than 0, a hint to the Tracer to do its best to capture the trace.\n * If 0, a hint to the trace to not-capture the trace. If absent, the Tracer\n * should use its default sampling mechanism.\n */\nexports.SAMPLING_PRIORITY = 'sampling.priority';\n// ---------------------------------------------------------------------------\n// PEER_* tags can be emitted by either client-side of server-side to describe\n// the other side/service in a peer-to-peer communications, like an RPC call.\n// ---------------------------------------------------------------------------\n/**\n * PEER_SERVICE (string) Remote service name (for some unspecified\n * definition of \"service\"). E.g., \"elasticsearch\", \"a_custom_microservice\", \"memcache\"\n */\nexports.PEER_SERVICE = 'peer.service';\n/** PEER_HOSTNAME (string) Remote hostname. E.g., \"opentracing.io\", \"internal.dns.name\" */\nexports.PEER_HOSTNAME = 'peer.hostname';\n/**\n * PEER_ADDRESS (string) Remote \"address\", suitable for use in a\n * networking client library. This may be a \"ip:port\", a bare\n * \"hostname\", a FQDN, or even a JDBC substring like \"mysql://prod-db:3306\"\n */\nexports.PEER_ADDRESS = 'peer.address';\n/**\n * PEER_HOST_IPV4 (number) Remote IPv4 address as a .-separated tuple.\n * E.g., \"127.0.0.1\"\n */\nexports.PEER_HOST_IPV4 = 'peer.ipv4';\n// PEER_HOST_IPV6 (string) Remote IPv6 address as a string of\n// colon-separated 4-char hex tuples. E.g., \"2001:0db8:85a3:0000:0000:8a2e:0370:7334\"\nexports.PEER_HOST_IPV6 = 'peer.ipv6';\n// PEER_PORT (number) Remote port. E.g., 80\nexports.PEER_PORT = 'peer.port';\n// ---------------------------------------------------------------------------\n// HTTP tags\n// ---------------------------------------------------------------------------\n/**\n * HTTP_URL (string) URL of the request being handled in this segment of the\n * trace, in standard URI format. E.g., \"https://domain.net/path/to?resource=here\"\n */\nexports.HTTP_URL = 'http.url';\n/**\n * HTTP_METHOD (string) HTTP method of the request for the associated Span. E.g.,\n * \"GET\", \"POST\"\n */\nexports.HTTP_METHOD = 'http.method';\n/**\n * HTTP_STATUS_CODE (number) HTTP response status code for the associated Span.\n * E.g., 200, 503, 404\n */\nexports.HTTP_STATUS_CODE = 'http.status_code';\n// -------------------------------------------------------------------------\n// Messaging tags\n// -------------------------------------------------------------------------\n/**\n * MESSAGE_BUS_DESTINATION (string) An address at which messages can be exchanged.\n * E.g. A Kafka record has an associated \"topic name\" that can be extracted\n * by the instrumented producer or consumer and stored using this tag.\n */\nexports.MESSAGE_BUS_DESTINATION = 'message_bus.destination';\n// --------------------------------------------------------------------------\n// Database tags\n// --------------------------------------------------------------------------\n/**\n * DB_INSTANCE (string) Database instance name. E.g., In java, if the\n * jdbc.url=\"jdbc:mysql://127.0.0.1:3306/customers\", the instance name is \"customers\".\n */\nexports.DB_INSTANCE = 'db.instance';\n/**\n * DB_STATEMENT (string) A database statement for the given database type.\n * E.g., for db.type=\"SQL\", \"SELECT * FROM wuser_table\";\n * for db.type=\"redis\", \"SET mykey 'WuValue'\".\n */\nexports.DB_STATEMENT = 'db.statement';\n/**\n * DB_TYPE (string) Database type. For any SQL database, \"sql\". For others,\n * the lower-case database category, e.g. \"cassandra\", \"hbase\", or \"redis\".\n */\nexports.DB_TYPE = 'db.type';\n/**\n * DB_USER (string) Username for accessing database. E.g., \"readonly_user\"\n * or \"reporting_user\"\n */\nexports.DB_USER = 'db.user';\n//# sourceMappingURL=tags.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Constants = require(\"./constants\");\nvar reference_1 = require(\"./reference\");\nvar span_1 = require(\"./span\");\n/**\n * Return a new REFERENCE_CHILD_OF reference.\n *\n * @param {SpanContext} spanContext - the parent SpanContext instance to\n *        reference.\n * @return a REFERENCE_CHILD_OF reference pointing to `spanContext`\n */\nfunction childOf(spanContext) {\n    // Allow the user to pass a Span instead of a SpanContext\n    if (spanContext instanceof span_1.default) {\n        spanContext = spanContext.context();\n    }\n    return new reference_1.default(Constants.REFERENCE_CHILD_OF, spanContext);\n}\nexports.childOf = childOf;\n/**\n * Return a new REFERENCE_FOLLOWS_FROM reference.\n *\n * @param {SpanContext} spanContext - the parent SpanContext instance to\n *        reference.\n * @return a REFERENCE_FOLLOWS_FROM reference pointing to `spanContext`\n */\nfunction followsFrom(spanContext) {\n    // Allow the user to pass a Span instead of a SpanContext\n    if (spanContext instanceof span_1.default) {\n        spanContext = spanContext.context();\n    }\n    return new reference_1.default(Constants.REFERENCE_FOLLOWS_FROM, spanContext);\n}\nexports.followsFrom = followsFrom;\n//# sourceMappingURL=functions.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tracer_1 = require(\"./tracer\");\nvar noopTracer = new tracer_1.default();\nvar _globalTracer = null;\n// Allows direct importing/requiring of the global tracer:\n//\n// let globalTracer = require('opentracing/global');\n//      OR\n// import globalTracer from 'opentracing/global';\n//\n// Acts a bridge to the global tracer that can be safely called before the\n// global tracer is initialized. The purpose of the delegation is to avoid the\n// sometimes nearly intractible initialization order problems that can arise in\n// applications with a complex set of dependencies, while also avoiding the\n// case where\nvar GlobalTracerDelegate = /** @class */ (function (_super) {\n    __extends(GlobalTracerDelegate, _super);\n    function GlobalTracerDelegate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GlobalTracerDelegate.prototype.startSpan = function () {\n        var tracer = _globalTracer || noopTracer;\n        return tracer.startSpan.apply(tracer, arguments);\n    };\n    GlobalTracerDelegate.prototype.inject = function () {\n        var tracer = _globalTracer || noopTracer;\n        return tracer.inject.apply(tracer, arguments);\n    };\n    GlobalTracerDelegate.prototype.extract = function () {\n        var tracer = _globalTracer || noopTracer;\n        return tracer.extract.apply(tracer, arguments);\n    };\n    return GlobalTracerDelegate;\n}(tracer_1.default));\nvar globalTracerDelegate = new GlobalTracerDelegate();\n/**\n * Set the global Tracer.\n *\n * The behavior is undefined if this function is called more than once.\n *\n * @param {Tracer} tracer - the Tracer implementation\n */\nfunction initGlobalTracer(tracer) {\n    _globalTracer = tracer;\n}\nexports.initGlobalTracer = initGlobalTracer;\n/**\n * Returns the global tracer.\n */\nfunction globalTracer() {\n    // Return the delegate.  Since the global tracer is largely a convenience\n    // (the user can always create their own tracers), the delegate is used to\n    // give the added convenience of not needing to worry about initialization\n    // order.\n    return globalTracerDelegate;\n}\nexports.globalTracer = globalTracer;\n//# sourceMappingURL=global_tracer.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binary_carrier_1 = require(\"./binary_carrier\");\nexports.BinaryCarrier = binary_carrier_1.default;\nvar Tags = require(\"./ext/tags\");\nexports.Tags = Tags;\nvar Noop = require(\"./noop\");\nvar reference_1 = require(\"./reference\");\nexports.Reference = reference_1.default;\nvar span_1 = require(\"./span\");\nexports.Span = span_1.default;\nvar span_context_1 = require(\"./span_context\");\nexports.SpanContext = span_context_1.default;\nvar tracer_1 = require(\"./tracer\");\nexports.Tracer = tracer_1.Tracer;\nvar mock_tracer_1 = require(\"./mock_tracer\");\nexports.MockTracer = mock_tracer_1.MockTracer;\n__export(require(\"./global_tracer\"));\n__export(require(\"./constants\"));\n__export(require(\"./functions\"));\n// Initialize the noops last to avoid a dependecy cycle between the classes.\nNoop.initialize();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mock_context_1 = require(\"./mock_context\");\nexports.MockContext = mock_context_1.default;\nvar mock_span_1 = require(\"./mock_span\");\nexports.MockSpan = mock_span_1.default;\nvar mock_tracer_1 = require(\"./mock_tracer\");\nexports.MockTracer = mock_tracer_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar opentracing = require(\"../index\");\n/**\n * OpenTracing Context implementation designed for use in\n * unit tests.\n */\nvar MockContext = /** @class */ (function (_super) {\n    __extends(MockContext, _super);\n    function MockContext(span) {\n        var _this = _super.call(this) || this;\n        // Store a reference to the span itself since this is a mock tracer\n        // intended to make debugging and unit testing easier.\n        _this._span = span;\n        return _this;\n    }\n    MockContext.prototype.span = function () {\n        return this._span;\n    };\n    return MockContext;\n}(opentracing.SpanContext));\nexports.MockContext = MockContext;\nexports.default = MockContext;\n//# sourceMappingURL=mock_context.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Index a collection of reported MockSpans in a way that's easy to run unit\n * test assertions against.\n */\nvar MockReport = /** @class */ (function () {\n    function MockReport(spans) {\n        var _this = this;\n        this.spans = spans;\n        this.spansByUUID = {};\n        this.spansByTag = {};\n        this.debugSpans = [];\n        this.unfinishedSpans = [];\n        spans.forEach(function (span) {\n            if (span._finishMs === 0) {\n                _this.unfinishedSpans.push(span);\n            }\n            _this.spansByUUID[span.uuid()] = span;\n            _this.debugSpans.push(span.debug());\n            var tags = span.tags();\n            Object.keys(tags).forEach(function (key) {\n                var val = tags[key];\n                _this.spansByTag[key] = _this.spansByTag[key] || {};\n                _this.spansByTag[key][val] = _this.spansByTag[key][val] || [];\n                _this.spansByTag[key][val].push(span);\n            });\n        });\n    }\n    MockReport.prototype.firstSpanWithTagValue = function (key, val) {\n        var m = this.spansByTag[key];\n        if (!m) {\n            return null;\n        }\n        var n = m[val];\n        if (!n) {\n            return null;\n        }\n        return n[0];\n    };\n    return MockReport;\n}());\nexports.MockReport = MockReport;\nexports.default = MockReport;\n//# sourceMappingURL=mock_report.js.map","\"use strict\";\n/* eslint-disable import/no-extraneous-dependencies */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar opentracing = require(\"../index\");\nvar mock_context_1 = require(\"./mock_context\");\n/**\n * OpenTracing Span implementation designed for use in unit tests.\n */\nvar MockSpan = /** @class */ (function (_super) {\n    __extends(MockSpan, _super);\n    //------------------------------------------------------------------------//\n    // MockSpan-specific\n    //------------------------------------------------------------------------//\n    function MockSpan(tracer) {\n        var _this = _super.call(this) || this;\n        _this._mockTracer = tracer;\n        _this._uuid = _this._generateUUID();\n        _this._startMs = Date.now();\n        _this._finishMs = 0;\n        _this._operationName = '';\n        _this._tags = {};\n        _this._logs = [];\n        return _this;\n    }\n    //------------------------------------------------------------------------//\n    // OpenTracing implementation\n    //------------------------------------------------------------------------//\n    MockSpan.prototype._context = function () {\n        return new mock_context_1.default(this);\n    };\n    MockSpan.prototype._setOperationName = function (name) {\n        this._operationName = name;\n    };\n    MockSpan.prototype._addTags = function (set) {\n        var keys = Object.keys(set);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var key = keys_1[_i];\n            this._tags[key] = set[key];\n        }\n    };\n    MockSpan.prototype._log = function (fields, timestamp) {\n        this._logs.push({\n            fields: fields,\n            timestamp: timestamp\n        });\n    };\n    MockSpan.prototype._finish = function (finishTime) {\n        this._finishMs = finishTime || Date.now();\n    };\n    MockSpan.prototype.uuid = function () {\n        return this._uuid;\n    };\n    MockSpan.prototype.operationName = function () {\n        return this._operationName;\n    };\n    MockSpan.prototype.durationMs = function () {\n        return this._finishMs - this._startMs;\n    };\n    MockSpan.prototype.tags = function () {\n        return this._tags;\n    };\n    MockSpan.prototype.tracer = function () {\n        return this._mockTracer;\n    };\n    MockSpan.prototype._generateUUID = function () {\n        var p0 = (\"00000000\" + Math.abs((Math.random() * 0xFFFFFFFF) | 0).toString(16)).substr(-8);\n        var p1 = (\"00000000\" + Math.abs((Math.random() * 0xFFFFFFFF) | 0).toString(16)).substr(-8);\n        return \"\" + p0 + p1;\n    };\n    MockSpan.prototype.addReference = function (ref) {\n    };\n    /**\n     * Returns a simplified object better for console.log()'ing.\n     */\n    MockSpan.prototype.debug = function () {\n        var obj = {\n            uuid: this._uuid,\n            operation: this._operationName,\n            millis: [this._finishMs - this._startMs, this._startMs, this._finishMs]\n        };\n        if (Object.keys(this._tags).length) {\n            obj.tags = this._tags;\n        }\n        return obj;\n    };\n    return MockSpan;\n}(opentracing.Span));\nexports.MockSpan = MockSpan;\nexports.default = MockSpan;\n//# sourceMappingURL=mock_span.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// TODO: Move mock-tracer to its own NPM package once it is complete and tested.\nvar opentracing = require(\"../index\");\nvar mock_report_1 = require(\"./mock_report\");\nvar mock_span_1 = require(\"./mock_span\");\n/**\n * OpenTracing Tracer implementation designed for use in unit tests.\n */\nvar MockTracer = /** @class */ (function (_super) {\n    __extends(MockTracer, _super);\n    //------------------------------------------------------------------------//\n    // MockTracer-specific\n    //------------------------------------------------------------------------//\n    function MockTracer() {\n        var _this = _super.call(this) || this;\n        _this._spans = [];\n        return _this;\n    }\n    //------------------------------------------------------------------------//\n    // OpenTracing implementation\n    //------------------------------------------------------------------------//\n    MockTracer.prototype._startSpan = function (name, fields) {\n        // _allocSpan is given it's own method so that derived classes can\n        // allocate any type of object they want, but not have to duplicate\n        // the other common logic in startSpan().\n        var span = this._allocSpan();\n        span.setOperationName(name);\n        this._spans.push(span);\n        if (fields.references) {\n            for (var _i = 0, _a = fields.references; _i < _a.length; _i++) {\n                var ref = _a[_i];\n                span.addReference(ref);\n            }\n        }\n        // Capture the stack at the time the span started\n        span._startStack = new Error().stack;\n        return span;\n    };\n    MockTracer.prototype._inject = function (span, format, carrier) {\n        throw new Error('NOT YET IMPLEMENTED');\n    };\n    MockTracer.prototype._extract = function (format, carrier) {\n        throw new Error('NOT YET IMPLEMENTED');\n    };\n    MockTracer.prototype._allocSpan = function () {\n        return new mock_span_1.default(this);\n    };\n    /**\n     * Discard any buffered data.\n     */\n    MockTracer.prototype.clear = function () {\n        this._spans = [];\n    };\n    /**\n     * Return the buffered data in a format convenient for making unit test\n     * assertions.\n     */\n    MockTracer.prototype.report = function () {\n        return new mock_report_1.default(this._spans);\n    };\n    return MockTracer;\n}(opentracing.Tracer));\nexports.MockTracer = MockTracer;\nexports.default = MockTracer;\n//# sourceMappingURL=mock_tracer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar span_1 = require(\"./span\");\nvar span_context_1 = require(\"./span_context\");\nvar tracer_1 = require(\"./tracer\");\nexports.tracer = null;\nexports.spanContext = null;\nexports.span = null;\n// Deferred initialization to avoid a dependency cycle where Tracer depends on\n// Span which depends on the noop tracer.\nfunction initialize() {\n    exports.tracer = new tracer_1.default();\n    exports.span = new span_1.default();\n    exports.spanContext = new span_context_1.default();\n}\nexports.initialize = initialize;\n//# sourceMappingURL=noop.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar span_1 = require(\"./span\");\n/**\n * Reference pairs a reference type constant (e.g., REFERENCE_CHILD_OF or\n * REFERENCE_FOLLOWS_FROM) with the SpanContext it points to.\n *\n * See the exported childOf() and followsFrom() functions at the package level.\n */\nvar Reference = /** @class */ (function () {\n    /**\n     * Initialize a new Reference instance.\n     *\n     * @param {string} type - the Reference type constant (e.g.,\n     *        REFERENCE_CHILD_OF or REFERENCE_FOLLOWS_FROM).\n     * @param {SpanContext} referencedContext - the SpanContext being referred\n     *        to. As a convenience, a Span instance may be passed in instead\n     *        (in which case its .context() is used here).\n     */\n    function Reference(type, referencedContext) {\n        this._type = type;\n        this._referencedContext = (referencedContext instanceof span_1.default ?\n            referencedContext.context() :\n            referencedContext);\n    }\n    /**\n     * @return {string} The Reference type (e.g., REFERENCE_CHILD_OF or\n     *         REFERENCE_FOLLOWS_FROM).\n     */\n    Reference.prototype.type = function () {\n        return this._type;\n    };\n    /**\n     * @return {SpanContext} The SpanContext being referred to (e.g., the\n     *         parent in a REFERENCE_CHILD_OF Reference).\n     */\n    Reference.prototype.referencedContext = function () {\n        return this._referencedContext;\n    };\n    return Reference;\n}());\nexports.default = Reference;\n//# sourceMappingURL=reference.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar noop = require(\"./noop\");\n/**\n * Span represents a logical unit of work as part of a broader Trace. Examples\n * of span might include remote procedure calls or a in-process function calls\n * to sub-components. A Trace has a single, top-level \"root\" Span that in turn\n * may have zero or more child Spans, which in turn may have children.\n */\nvar Span = /** @class */ (function () {\n    function Span() {\n    }\n    // ---------------------------------------------------------------------- //\n    // OpenTracing API methods\n    // ---------------------------------------------------------------------- //\n    /**\n     * Returns the SpanContext object associated with this Span.\n     *\n     * @return {SpanContext}\n     */\n    Span.prototype.context = function () {\n        return this._context();\n    };\n    /**\n     * Returns the Tracer object used to create this Span.\n     *\n     * @return {Tracer}\n     */\n    Span.prototype.tracer = function () {\n        return this._tracer();\n    };\n    /**\n     * Sets the string name for the logical operation this span represents.\n     *\n     * @param {string} name\n     */\n    Span.prototype.setOperationName = function (name) {\n        this._setOperationName(name);\n        return this;\n    };\n    /**\n     * Sets a key:value pair on this Span that also propagates to future\n     * children of the associated Span.\n     *\n     * setBaggageItem() enables powerful functionality given a full-stack\n     * opentracing integration (e.g., arbitrary application data from a web\n     * client can make it, transparently, all the way into the depths of a\n     * storage system), and with it some powerful costs: use this feature with\n     * care.\n     *\n     * IMPORTANT NOTE #1: setBaggageItem() will only propagate baggage items to\n     * *future* causal descendants of the associated Span.\n     *\n     * IMPORTANT NOTE #2: Use this thoughtfully and with care. Every key and\n     * value is copied into every local *and remote* child of the associated\n     * Span, and that can add up to a lot of network and cpu overhead.\n     *\n     * @param {string} key\n     * @param {string} value\n     */\n    Span.prototype.setBaggageItem = function (key, value) {\n        this._setBaggageItem(key, value);\n        return this;\n    };\n    /**\n     * Returns the value for a baggage item given its key.\n     *\n     * @param  {string} key\n     *         The key for the given trace attribute.\n     * @return {string}\n     *         String value for the given key, or undefined if the key does not\n     *         correspond to a set trace attribute.\n     */\n    Span.prototype.getBaggageItem = function (key) {\n        return this._getBaggageItem(key);\n    };\n    /**\n     * Adds a single tag to the span.  See `addTags()` for details.\n     *\n     * @param {string} key\n     * @param {any} value\n     */\n    Span.prototype.setTag = function (key, value) {\n        var _a;\n        // NOTE: the call is normalized to a call to _addTags()\n        this._addTags((_a = {}, _a[key] = value, _a));\n        return this;\n    };\n    /**\n     * Adds the given key value pairs to the set of span tags.\n     *\n     * Multiple calls to addTags() results in the tags being the superset of\n     * all calls.\n     *\n     * The behavior of setting the same key multiple times on the same span\n     * is undefined.\n     *\n     * The supported type of the values is implementation-dependent.\n     * Implementations are expected to safely handle all types of values but\n     * may choose to ignore unrecognized / unhandle-able values (e.g. objects\n     * with cyclic references, function objects).\n     *\n     * @return {[type]} [description]\n     */\n    Span.prototype.addTags = function (keyValueMap) {\n        this._addTags(keyValueMap);\n        return this;\n    };\n    /**\n     * Add a log record to this Span, optionally at a user-provided timestamp.\n     *\n     * For example:\n     *\n     *     span.log({\n     *         size: rpc.size(),  // numeric value\n     *         URI: rpc.URI(),  // string value\n     *         payload: rpc.payload(),  // Object value\n     *         \"keys can be arbitrary strings\": rpc.foo(),\n     *     });\n     *\n     *     span.log({\n     *         \"error.description\": someError.description(),\n     *     }, someError.timestampMillis());\n     *\n     * @param {object} keyValuePairs\n     *        An object mapping string keys to arbitrary value types. All\n     *        Tracer implementations should support bool, string, and numeric\n     *        value types, and some may also support Object values.\n     * @param {number} timestamp\n     *        An optional parameter specifying the timestamp in milliseconds\n     *        since the Unix epoch. Fractional values are allowed so that\n     *        timestamps with sub-millisecond accuracy can be represented. If\n     *        not specified, the implementation is expected to use its notion\n     *        of the current time of the call.\n     */\n    Span.prototype.log = function (keyValuePairs, timestamp) {\n        this._log(keyValuePairs, timestamp);\n        return this;\n    };\n    /**\n     * DEPRECATED\n     */\n    Span.prototype.logEvent = function (eventName, payload) {\n        return this._log({ event: eventName, payload: payload });\n    };\n    /**\n     * Sets the end timestamp and finalizes Span state.\n     *\n     * With the exception of calls to Span.context() (which are always allowed),\n     * finish() must be the last call made to any span instance, and to do\n     * otherwise leads to undefined behavior.\n     *\n     * @param  {number} finishTime\n     *         Optional finish time in milliseconds as a Unix timestamp. Decimal\n     *         values are supported for timestamps with sub-millisecond accuracy.\n     *         If not specified, the current time (as defined by the\n     *         implementation) will be used.\n     */\n    Span.prototype.finish = function (finishTime) {\n        this._finish(finishTime);\n        // Do not return `this`. The Span generally should not be used after it\n        // is finished so chaining is not desired in this context.\n    };\n    // ---------------------------------------------------------------------- //\n    // Derived classes can choose to implement the below\n    // ---------------------------------------------------------------------- //\n    // By default returns a no-op SpanContext.\n    Span.prototype._context = function () {\n        return noop.spanContext;\n    };\n    // By default returns a no-op tracer.\n    //\n    // The base class could store the tracer that created it, but it does not\n    // in order to ensure the no-op span implementation has zero members,\n    // which allows V8 to aggressively optimize calls to such objects.\n    Span.prototype._tracer = function () {\n        return noop.tracer;\n    };\n    // By default does nothing\n    Span.prototype._setOperationName = function (name) {\n    };\n    // By default does nothing\n    Span.prototype._setBaggageItem = function (key, value) {\n    };\n    // By default does nothing\n    Span.prototype._getBaggageItem = function (key) {\n        return undefined;\n    };\n    // By default does nothing\n    //\n    // NOTE: both setTag() and addTags() map to this function. keyValuePairs\n    // will always be an associative array.\n    Span.prototype._addTags = function (keyValuePairs) {\n    };\n    // By default does nothing\n    Span.prototype._log = function (keyValuePairs, timestamp) {\n    };\n    // By default does nothing\n    //\n    // finishTime is expected to be either a number or undefined.\n    Span.prototype._finish = function (finishTime) {\n    };\n    return Span;\n}());\nexports.Span = Span;\nexports.default = Span;\n//# sourceMappingURL=span.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * SpanContext represents Span state that must propagate to descendant Spans\n * and across process boundaries.\n *\n * SpanContext is logically divided into two pieces: the user-level \"Baggage\"\n * (see setBaggageItem and getBaggageItem) that propagates across Span\n * boundaries and any Tracer-implementation-specific fields that are needed to\n * identify or otherwise contextualize the associated Span instance (e.g., a\n * <trace_id, span_id, sampled> tuple).\n */\nvar SpanContext = /** @class */ (function () {\n    function SpanContext() {\n    }\n    // The SpanContext is entirely implementation dependent\n    /**\n     * Returns a string representation of the implementation internal trace ID.\n     *\n     * @returns {string}\n     */\n    SpanContext.prototype.toTraceId = function () {\n        return '';\n    };\n    /**\n     * Returns a string representation of the implementation internal span ID.\n     *\n     * @returns {string}\n     */\n    SpanContext.prototype.toSpanId = function () {\n        return '';\n    };\n    return SpanContext;\n}());\nexports.SpanContext = SpanContext;\nexports.default = SpanContext;\n//# sourceMappingURL=span_context.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Functions = require(\"./functions\");\nvar Noop = require(\"./noop\");\nvar span_1 = require(\"./span\");\n/**\n * Tracer is the entry-point between the instrumentation API and the tracing\n * implementation.\n *\n * The default object acts as a no-op implementation.\n *\n * Note to implementators: derived classes can choose to directly implement the\n * methods in the \"OpenTracing API methods\" section, or optionally the subset of\n * underscore-prefixed methods to pick up the argument checking and handling\n * automatically from the base class.\n */\nvar Tracer = /** @class */ (function () {\n    function Tracer() {\n    }\n    // ---------------------------------------------------------------------- //\n    // OpenTracing API methods\n    // ---------------------------------------------------------------------- //\n    /**\n     * Starts and returns a new Span representing a logical unit of work.\n     *\n     * For example:\n     *\n     *     // Start a new (parentless) root Span:\n     *     var parent = Tracer.startSpan('DoWork');\n     *\n     *     // Start a new (child) Span:\n     *     var child = Tracer.startSpan('load-from-db', {\n     *         childOf: parent.context(),\n     *     });\n     *\n     *     // Start a new async (FollowsFrom) Span:\n     *     var child = Tracer.startSpan('async-cache-write', {\n     *         references: [\n     *             opentracing.followsFrom(parent.context())\n     *         ],\n     *     });\n     *\n     * @param {string} name - the name of the operation (REQUIRED).\n     * @param {SpanOptions} [options] - options for the newly created span.\n     * @return {Span} - a new Span object.\n     */\n    Tracer.prototype.startSpan = function (name, options) {\n        if (options === void 0) { options = {}; }\n        // Convert options.childOf to fields.references as needed.\n        if (options.childOf) {\n            // Convert from a Span or a SpanContext into a Reference.\n            var childOf = Functions.childOf(options.childOf);\n            if (options.references) {\n                options.references.push(childOf);\n            }\n            else {\n                options.references = [childOf];\n            }\n            delete (options.childOf);\n        }\n        return this._startSpan(name, options);\n    };\n    /**\n     * Injects the given SpanContext instance for cross-process propagation\n     * within `carrier`. The expected type of `carrier` depends on the value of\n     * `format.\n     *\n     * OpenTracing defines a common set of `format` values (see\n     * FORMAT_TEXT_MAP, FORMAT_HTTP_HEADERS, and FORMAT_BINARY), and each has\n     * an expected carrier type.\n     *\n     * Consider this pseudocode example:\n     *\n     *     var clientSpan = ...;\n     *     ...\n     *     // Inject clientSpan into a text carrier.\n     *     var headersCarrier = {};\n     *     Tracer.inject(clientSpan.context(), Tracer.FORMAT_HTTP_HEADERS, headersCarrier);\n     *     // Incorporate the textCarrier into the outbound HTTP request header\n     *     // map.\n     *     Object.assign(outboundHTTPReq.headers, headersCarrier);\n     *     // ... send the httpReq\n     *\n     * @param  {SpanContext} spanContext - the SpanContext to inject into the\n     *         carrier object. As a convenience, a Span instance may be passed\n     *         in instead (in which case its .context() is used for the\n     *         inject()).\n     * @param  {string} format - the format of the carrier.\n     * @param  {any} carrier - see the documentation for the chosen `format`\n     *         for a description of the carrier object.\n     */\n    Tracer.prototype.inject = function (spanContext, format, carrier) {\n        // Allow the user to pass a Span instead of a SpanContext\n        if (spanContext instanceof span_1.default) {\n            spanContext = spanContext.context();\n        }\n        return this._inject(spanContext, format, carrier);\n    };\n    /**\n     * Returns a SpanContext instance extracted from `carrier` in the given\n     * `format`.\n     *\n     * OpenTracing defines a common set of `format` values (see\n     * FORMAT_TEXT_MAP, FORMAT_HTTP_HEADERS, and FORMAT_BINARY), and each has\n     * an expected carrier type.\n     *\n     * Consider this pseudocode example:\n     *\n     *     // Use the inbound HTTP request's headers as a text map carrier.\n     *     var headersCarrier = inboundHTTPReq.headers;\n     *     var wireCtx = Tracer.extract(Tracer.FORMAT_HTTP_HEADERS, headersCarrier);\n     *     var serverSpan = Tracer.startSpan('...', { childOf : wireCtx });\n     *\n     * @param  {string} format - the format of the carrier.\n     * @param  {any} carrier - the type of the carrier object is determined by\n     *         the format.\n     * @return {SpanContext}\n     *         The extracted SpanContext, or null if no such SpanContext could\n     *         be found in `carrier`\n     */\n    Tracer.prototype.extract = function (format, carrier) {\n        return this._extract(format, carrier);\n    };\n    // ---------------------------------------------------------------------- //\n    // Derived classes can choose to implement the below\n    // ---------------------------------------------------------------------- //\n    // NOTE: the input to this method is *always* an associative array. The\n    // public-facing startSpan() method normalizes the arguments so that\n    // all N implementations do not need to worry about variations in the call\n    // signature.\n    //\n    // The default behavior returns a no-op span.\n    Tracer.prototype._startSpan = function (name, fields) {\n        return Noop.span;\n    };\n    // The default behavior is a no-op.\n    Tracer.prototype._inject = function (spanContext, format, carrier) {\n    };\n    // The default behavior is to return a no-op SpanContext.\n    Tracer.prototype._extract = function (format, carrier) {\n        return Noop.spanContext;\n    };\n    return Tracer;\n}());\nexports.Tracer = Tracer;\nexports.default = Tracer;\n//# sourceMappingURL=tracer.js.map","import { createMulticastDelegate } from \"./multicastDelegate\";\n\nconst originalPromise = window.Promise;\n\nexport function restoreOriginalPromise() {\n  window.Promise = originalPromise;\n}\n\nexport function createAsyncLocalProvider() {\n  let currentLocals = new Map();\n\n  const getCurrentLocals = () => currentLocals;\n  const cloneCurrentLocals = () => new Map(currentLocals.entries());\n  const completionHooks = createMulticastDelegate(\n    \"AsyncLocalProvider.PromiseCompletion\"\n  );\n  const rejectionHooks = createMulticastDelegate(\n    \"AsyncLocalProvider.PromiseRejection\"\n  );\n\n  let nextInstanceId = 1;\n\n  class PromiseWrapper extends Promise {\n    constructor(executor) {\n      const parentLocals = currentLocals;\n      const thisLocals = cloneCurrentLocals();\n      const thisInstanceId = nextInstanceId++;\n\n      //console.log(`PrmoseWrapper[${thisInstanceId}].ctor`);\n\n      super(function(resolve, reject) {\n        const wrapperResolve = value => {\n          currentLocals = thisLocals;\n          try {\n            //console.log(`PrmoseWrapper[${thisInstanceId}].resolve(${value})`);\n            completionHooks.invoke(value, thisInstanceId);\n            resolve(value);\n          } finally {\n            currentLocals = parentLocals;\n          }\n        };\n        const wrapperReject = error => {\n          currentLocals = thisLocals;\n          try {\n            //console.log(`PrmoseWrapper[${thisInstanceId}].reject(${error})`);\n            rejectionHooks.invoke(error, thisInstanceId);\n            reject(error);\n          } finally {\n            currentLocals = parentLocals;\n          }\n        };\n        currentLocals = thisLocals;\n        try {\n          return executor(wrapperResolve, wrapperReject);\n        } finally {\n          currentLocals = parentLocals;\n        }\n      });\n    }\n  }\n\n  window.Promise = PromiseWrapper;\n\n  return {\n    createAsyncLocal(initialValue) {\n      const key = {};\n      getCurrentLocals().set(key, initialValue);\n      return {\n        get() {\n          return getCurrentLocals().get(key);\n        },\n        set(newValue) {\n          getCurrentLocals().set(key, newValue);\n        },\n        remove() {\n          getCurrentLocals().delete(key);\n        }\n      };\n    },\n    cloneCurrentLocals,\n    addPromiseCompletionHook(callback) {\n      completionHooks.add(callback);\n    },\n    addPromiseRejectionHook(callback) {\n      rejectionHooks.add(callback);\n    }\n  };\n}\n","import {\n  Tracer,\n  Reference,\n  REFERENCE_FOLLOWS_FROM,\n  REFERENCE_CHILD_OF\n} from \"opentracing\";\n\nimport { createCodePathTracer } from \"./codePathTracer\";\nimport { createCodePathStream } from \"./codePathStream\";\nimport { createAsyncLocalProvider } from \"./asyncLocalProvider\";\nimport { createDefaultScopeManager } from \"./codePathScopeManager\";\nimport { LOG_LEVEL } from \"./logLevel\";\n\nexport const createRealClock = () => {\n  return {\n    now() {\n      return performance.now();\n    },\n    epoch() {\n      return new Date().getTime();\n    },\n    setInterval(func, delay) {\n      return setInterval(func, delay);\n    },\n    clearInterval(id) {\n      clearInterval(id);\n    },\n    setTimeout(func, delay) {\n      return setTimeout(func, delay);\n    },\n    clearTimeout(id) {\n      clearTimeout(id);\n    }\n  };\n};\n\n// export const createDefaultScopeManager = () => {\n//   let activeTracer = undefined;\n//   let activeSpan = undefined;\n//   return {\n//     getActiveTracer() {\n//       return activeTracer;\n//     },\n//     getActiveSpan() {\n//       return activeSpan;\n//     },\n//     setActiveTracer(tracer) {\n//       activeTracer = tracer;\n//     },\n//     setActiveSpan(span) {\n//       activeSpan = span;\n//     }\n//   };\n// };\n\nexport const noopTracerFactory = () => new Tracer();\n\nexport const defaultTracerFactory = (stream, options) =>\n  createCodePathTracer(`webuser${options.clock.now()}`, stream, options);\n\nexport const GlobalCodePath = {\n  configure(options) {\n    const { input, output } = createCodePath(options);\n    Object.assign(GlobalCodePath, {\n      ...input,\n      getOutputStream() {\n        return output;\n      }\n    });\n  },\n  getOutputStream() {\n    throw new Error(\"GlobalCodePath was not configured\");\n  }\n};\n\nexport function createCodePath(options) {\n  const getAsyncLocalProvider = () => {\n    if (options && options.asyncLocalProvider) {\n      return options.asyncLocalProvider;\n    }\n    return createAsyncLocalProvider();\n  };\n\n  const clock = (options && options.clock) || createRealClock();\n  const scopeManager =\n    (options && options.scopeManager) ||\n    createDefaultScopeManager(getAsyncLocalProvider());\n  const tracerFactory =\n    (options && options.tracerFactory) || defaultTracerFactory;\n  const outputStream =\n    (options && options.outputStream) ||\n    createCodePathStream(options ? options.stream : undefined);\n  let spanEntries = {};\n\n  const getOrCreateActiveTracer = () => {\n    const existingTracer = scopeManager.getActiveTracer();\n    if (existingTracer) {\n      return existingTracer;\n    }\n\n    const newTracer = tracerFactory({ clock, scopeManager, tracerFactory });\n    scopeManager.setActiveTracer(newTracer);\n    return newTracer;\n  };\n\n  const getParentSpanContext = parentContext => {\n    if (parentContext) {\n      return parentContext;\n    }\n    const existingSpan = scopeManager.getActiveSpan();\n    if (existingSpan) {\n      return existingSpan.context();\n    }\n  };\n\n  const logToActiveSpan = tags => {\n    const existingSpan = scopeManager.getActiveSpan();\n    if (existingSpan) {\n      existingSpan.log(tags);\n    } else {\n      const activeTracer = scopeManager.getActiveTracer();\n      const tempSpan = activeTracer.startSpan(\"unknown-root\");\n      tempSpan.log(tags);\n      tempSpan.finish();\n    }\n  };\n\n  const startSpan = (id, tags, parentContext, parentReferenceType) => {\n    const tracer = getOrCreateActiveTracer();\n    const parentReferenceContext = getParentSpanContext(parentContext);\n    const spanOptions = {\n      references: parentReferenceContext && [\n        new Reference(parentReferenceType, parentReferenceContext)\n      ],\n      tags\n    };\n    const childSpan = tracer.startSpan(id, spanOptions);\n    scopeManager.setActiveSpan(childSpan);\n    const childSpanId = childSpan.context().toSpanId();\n    spanEntries[childSpanId] = {\n      span: childSpan,\n      options: spanOptions\n    };\n    return childSpan;\n  };\n\n  scopeManager.setActiveTracer(\n    tracerFactory(outputStream, {\n      clock,\n      scopeManager,\n      tracerFactory\n    })\n  );\n\n  const thisCodePath = {\n    getActiveSpan() {\n      return scopeManager.getActiveSpan();\n    },\n    logDebug(id, tags) {\n      logToActiveSpan({ $id: id, level: LOG_LEVEL.debug, ...tags });\n    },\n    logEvent(id, tags) {\n      logToActiveSpan({ $id: id, level: LOG_LEVEL.event, ...tags });\n    },\n    logWarning(id, tags) {\n      logToActiveSpan({ $id: id, level: LOG_LEVEL.warning, ...tags });\n    },\n    logError(id, tags) {\n      logToActiveSpan({ $id: id, level: LOG_LEVEL.error, ...tags });\n    },\n    logCritical(id, tags) {\n      logToActiveSpan({ $id: id, level: LOG_LEVEL.critical, ...tags });\n    },\n    spanRoot(id, tags) {\n      scopeManager.setActiveSpan(undefined);\n      return startSpan(id, tags);\n    },\n    spanChild(id, tags, parentContext) {\n      return startSpan(id, tags, parentContext, REFERENCE_CHILD_OF);\n    },\n    spanFollower(id, tags, parentContext) {\n      return startSpan(id, tags, parentContext, REFERENCE_FOLLOWS_FROM);\n    },\n    finishSpan(tags) {\n      const activeSpan = scopeManager.getActiveSpan();\n      if (!activeSpan) {\n        throw new Error(\"Current scope has no active span\");\n      }\n      activeSpan.finish();\n      if (!activeSpan.doesNotifyTracerOnFinish) {\n        thisCodePath.notifySpanFinished(activeSpan);\n      }\n    },\n    notifySpanFinished(span) {\n      const spanContext = span.context();\n      const spanId = spanContext.toSpanId();\n      const traceId = spanContext.toTraceId();\n      const entry = spanEntries[spanId];\n      if (!entry) {\n        throw new Error(`Trace span not found: id [${spanId}]`);\n      }\n      if (span === scopeManager.getActiveSpan()) {\n        const parentContext =\n          entry.options.references &&\n          entry.options.references[0].referencedContext();\n        if (parentContext && parentContext.toTraceId() === traceId) {\n          const parentEntry = spanEntries[parentContext.toSpanId()];\n          if (parentEntry) {\n            scopeManager.setActiveSpan(parentEntry.span);\n          }\n        } else {\n          scopeManager.setActiveSpan(undefined);\n        }\n      }\n      delete spanEntries[spanId];\n    },\n    clearAll() {\n      spanEntries = {};\n      scopeManager.setActiveSpan(undefined);\n    }\n  };\n\n  return {\n    input: thisCodePath,\n    output: outputStream\n  };\n}\n","import {\n  createRootNode,\n  createRegularNode,\n  appendChildNodeToParent,\n  getNodesAsFlatArray,\n  getTopLevelNodesAsArray,\n  walkNodesDepthFirst,\n  findNextMatchingNode,\n  findPrevMatchingNode\n} from \"./codePathModel\";\n\nimport { createMulticastDelegate } from \"./multicastDelegate\";\n\nexport function createCodePathFlatFilterModel(sourceModel, predicate) {\n  const insertNodesCallbacks = createMulticastDelegate(\n    \"CodePathFlatFilterModel.insertNodes\"\n  );\n  const updateNodesCallbacks = createMulticastDelegate(\n    \"CodePathFlatFilterModel.updateNodes\"\n  );\n\n  let resultNodeById = {};\n  let newlyCreatedResultNodes = undefined;\n  let resultRootNode = undefined;\n\n  const initializeFromSourceModel = () => {\n    resultNodeById = {};\n    newlyCreatedResultNodes = undefined;\n    resultRootNode = performSearch();\n  };\n\n  const sourceModelSubscriber = {\n    insertNodes: handleInsertedSourceNodes,\n    updateNodes: handleUpdatedSourceNodes\n  };\n\n  sourceModel.subscribe(sourceModelSubscriber);\n  initializeFromSourceModel();\n\n  return {\n    getRootNode() {\n      return resultRootNode;\n    },\n    getNodesFlat() {\n      return getNodesAsFlatArray(resultRootNode);\n    },\n    getTopLevelNodes() {\n      return getTopLevelNodesAsArray(resultRootNode);\n    },\n    getFirstMatchedNode() {\n      let firstMatchedNode = undefined;\n      walkNodesDepthFirst(resultRootNode, node => {\n        if (node.matched) {\n          firstMatchedNode = node;\n          return false;\n        }\n      });\n      return firstMatchedNode;\n    },\n    getNextMatchedNode(matchedNode) {\n      return findNextMatchingNode(matchedNode, node => node.matched);\n    },\n    getPrevMatchedNode(matchedNode) {\n      return findPrevMatchingNode(matchedNode, node => node.matched);\n    },\n    subscribe(subscriber) {\n      if (subscriber.insertNodes) {\n        insertNodesCallbacks.add(subscriber.insertNodes);\n      }\n      if (subscriber.updateNodes) {\n        updateNodesCallbacks.add(subscriber.updateNodes);\n      }\n    },\n    unsubscribe(subscriber) {\n      if (subscriber.insertNodes) {\n        insertNodesCallbacks.remove(subscriber.insertNodes);\n      }\n      if (subscriber.updateNodes) {\n        updateNodesCallbacks.remove(subscriber.updateNodes);\n      }\n    },\n    unsubscribeFromSource() {\n      sourceModel.unsubscribe(sourceModelSubscriber);\n    },\n    clearAll() {\n      sourceModel.clearAll();\n      initializeFromSourceModel();\n    }\n  };\n\n  function performSearch() {\n    const sourceRootNode = sourceModel.getRootNode();\n    const resultRootNode = createRootNode();\n    resultNodeById[resultRootNode.id] = resultRootNode;\n\n    depthFirstSearchSubTree(sourceRootNode, () => resultRootNode);\n\n    return resultRootNode;\n  }\n\n  function depthFirstSearchSubTree(node, getResultParentNode) {\n    const createThisResultNode = matched => {\n      return createResultNode(node, matched, getResultParentNode);\n    };\n\n    const isRootNode = !node.parent;\n    const thisNodeMatched = !isRootNode && predicate(node);\n    let thisResultNode = thisNodeMatched\n      ? createThisResultNode(true)\n      : undefined;\n\n    for (\n      let subNode = node.firstChild;\n      !!subNode;\n      subNode = subNode.nextSibling\n    ) {\n      depthFirstSearchSubTree(subNode, getResultParentNode);\n    }\n  }\n\n  function createResultNode(sourceNode, matched, getResultParentNode) {\n    const resultParentNode = getResultParentNode();\n    let resultNode = createRegularNode(\n      sourceNode.id,\n      resultParentNode,\n      sourceNode.entry,\n      sourceModel.extractEntryMetrics\n    );\n    resultNodeById[resultNode.id] = resultNode;\n    if (newlyCreatedResultNodes) {\n      newlyCreatedResultNodes.push(resultNode);\n    }\n    appendChildNodeToParent(resultNode, resultParentNode);\n    resultNode.sourceNode = sourceNode;\n    resultNode.matched = matched;\n    return resultNode;\n  }\n\n  function handleInsertedSourceNodes(insertedNodes) {\n    newlyCreatedResultNodes = [];\n    const matchingNodes = insertedNodes.filter(predicate);\n\n    matchingNodes.forEach(sourceNode => {\n      createResultNode(sourceNode, true, () => resultRootNode);\n    });\n\n    if (newlyCreatedResultNodes.length > 0) {\n      insertNodesCallbacks.invoke(newlyCreatedResultNodes);\n    }\n    newlyCreatedResultNodes = undefined;\n  }\n\n  function handleUpdatedSourceNodes(updatedNodes) {}\n}\n","import { createMulticastDelegate } from \"./multicastDelegate\";\n\nexport function createCodePathModel(options) {\n  const insertNodesCallbacks = createMulticastDelegate(\n    \"CodePathModel.insertNodes\"\n  );\n  const updateNodesCallbacks = createMulticastDelegate(\n    \"CodePathModel.updateNodes\"\n  );\n  const extractEntryMetrics =\n    options && options.extractEntryMetrics\n      ? options.extractEntryMetrics\n      : entry => entry.metrics;\n\n  let traceNodeMap = undefined;\n  let rootNode = undefined;\n  let nextNodeId = 1;\n\n  const initializeModel = () => {\n    traceNodeMap = createTraceNodeMap();\n    rootNode = createRootNode();\n  };\n\n  const getParentContext = entry => {\n    if (entry.token === \"StartSpan\") {\n      return entry.childOf || entry.followsFrom;\n    } else {\n      return entry;\n    }\n  };\n\n  const findParentNode = entry => {\n    const parentContext = getParentContext(entry);\n    if (parentContext) {\n      const parentNode = traceNodeMap.getSpanNode(\n        parentContext.traceId,\n        parentContext.spanId\n      );\n      if (parentNode) {\n        return parentNode;\n      }\n      console.warn(\"CODEPATH.MODEL>\", \"Span node not found\", parentContext);\n    }\n    return rootNode;\n  };\n\n  const bubbleSingleMetric = (targetNode, key, value) => {\n    if (!targetNode.metrics) {\n      targetNode.metrics = { [key]: value };\n    } else if (!targetNode.metrics[key]) {\n      targetNode.metrics[key] = value;\n    } else {\n      targetNode.metrics[key] += value;\n    }\n  };\n\n  const bubbleMetrics = (node, insertQueue, updateQueue) => {\n    if (!node.metrics) {\n      return;\n    }\n    const insertSet = new Set(insertQueue);\n    const metricKeys = Object.keys(node.metrics);\n    for (\n      let targetNode = node.parent;\n      targetNode.id > 0;\n      targetNode = targetNode.parent\n    ) {\n      metricKeys.forEach(key => {\n        const value = node.metrics[key];\n        bubbleSingleMetric(targetNode, key, value);\n      });\n      if (!insertSet.has(targetNode)) {\n        updateQueue.push(targetNode);\n      }\n    }\n  };\n\n  const handleInsertNodeEntry = (entry, insertQueue, updateQueue) => {\n    const { traceId, spanId } = entry;\n    const parent = findParentNode(entry);\n    const newNode = createRegularNode(\n      nextNodeId++,\n      parent,\n      entry,\n      extractEntryMetrics\n    );\n\n    appendChildNodeToParent(newNode, parent);\n    if (entry.token === \"StartSpan\") {\n      traceNodeMap.setSpanNode(traceId, spanId, newNode);\n    }\n\n    insertQueue.push(newNode);\n    bubbleMetrics(newNode, insertQueue, updateQueue);\n  };\n\n  const handleSpanTagsEntry = (entry, insertQueue, updateQueue) => {\n    const node = traceNodeMap.getSpanNode(entry.traceId, entry.spanId);\n    if (node && entry.tags && entry.tags.$$id) {\n      const currentTagsIds = node.entry.tags.$$id;\n      const newTagsIds = Array.isArray(currentTagsIds)\n        ? currentTagsIds\n        : currentTagsIds\n        ? [currentTagsIds]\n        : [];\n      newTagsIds.push(entry.tags.$$id);\n      node.entry.tags = { $$id: newTagsIds };\n      updateQueue.push(node);\n    }\n  };\n\n  const handleEndSpanEntry = (entry, insertQueue, updateQueue) => {\n    const node = traceNodeMap.getSpanNode(entry.traceId, entry.spanId);\n    if (node) {\n      node.entry.duration = entry.time - node.entry.time;\n      updateQueue.push(node);\n    }\n  };\n\n  const handleStartTracerEntry = (entry, insertQueue, updateQueue) => {};\n\n  const entryHandlerByToken = {\n    StartTracer: handleStartTracerEntry,\n    StartSpan: handleInsertNodeEntry,\n    Log: handleInsertNodeEntry,\n    SpanTags: handleSpanTagsEntry,\n    EndSpan: handleEndSpanEntry\n  };\n\n  const handleEntry = (entry, insertQueue, updateQueue) => {\n    const handler = entryHandlerByToken[entry.token];\n    if (handler) {\n      handler(entry, insertQueue, updateQueue);\n    } else {\n      console.error(`Unknown entry token [${entry.token}]`);\n    }\n  };\n\n  initializeModel();\n\n  return {\n    getRootNode() {\n      return rootNode;\n    },\n    getNodesFlat() {\n      return getNodesAsFlatArray(rootNode);\n    },\n    getTopLevelNodes() {\n      return getTopLevelNodesAsArray(rootNode);\n    },\n    walkNodesDepthFirst(callback) {\n      walkNodesDepthFirst(rootNode, callback);\n    },\n    publish(entries) {\n      const insertQueue = [];\n      const updateQueue = [];\n      entries.forEach(entry => {\n        handleEntry(entry, insertQueue, updateQueue);\n      });\n      if (insertQueue.length > 0) {\n        insertNodesCallbacks.invoke(insertQueue);\n      }\n      if (updateQueue.length > 0) {\n        updateNodesCallbacks.invoke(updateQueue);\n      }\n    },\n    subscribe(subscriber) {\n      if (subscriber.insertNodes) {\n        insertNodesCallbacks.add(subscriber.insertNodes);\n      }\n      if (subscriber.updateNodes) {\n        updateNodesCallbacks.add(subscriber.updateNodes);\n      }\n    },\n    unsubscribe(subscriber) {\n      if (subscriber.insertNodes) {\n        insertNodesCallbacks.remove(subscriber.insertNodes);\n      }\n      if (subscriber.updateNodes) {\n        updateNodesCallbacks.remove(subscriber.updateNodes);\n      }\n    },\n    // deleteRow(id) {\n    // },\n    clearAll() {\n      initializeModel();\n    },\n    extractEntryMetrics\n  };\n}\n\nexport function createRootNode() {\n  return {\n    id: 0,\n    entry: undefined,\n    parent: undefined,\n    top: undefined,\n    depth: -1,\n    firstChild: undefined,\n    lastChild: undefined,\n    prevSibling: undefined,\n    nextSibling: undefined,\n    metrics: undefined\n  };\n}\n\nexport function createRegularNode(id, parent, entry, extractEntryMetrics) {\n  const node = {\n    id,\n    entry,\n    parent,\n    depth: parent.depth + 1,\n    top: parent.top,\n    firstChild: undefined,\n    lastChild: undefined,\n    prevSibling: undefined,\n    nextSibling: undefined,\n    metrics: extractEntryMetrics ? extractEntryMetrics(entry) : entry.metrics\n  };\n  if (!node.top) {\n    node.top = node;\n  }\n  return node;\n}\n\nexport function appendChildNodeToParent(newChild, parent) {\n  if (parent.lastChild) {\n    newChild.prevSibling = parent.lastChild;\n    parent.lastChild.nextSibling = newChild;\n  } else {\n    parent.firstChild = newChild;\n  }\n  parent.lastChild = newChild;\n}\n\nexport function getNodesAsFlatArray(rootNode) {\n  if (!rootNode) {\n    return [];\n  }\n  const flatNodes = [];\n  walkNodesDepthFirst(rootNode, node => flatNodes.push(node));\n  return flatNodes;\n}\n\nexport function getTopLevelNodesAsArray(rootNode) {\n  const topLevelNodes = [];\n  walkImmediateSubNodes(rootNode, node => {\n    topLevelNodes.push(node);\n  });\n  return topLevelNodes;\n}\n\nexport function walkNodesDepthFirst(rootNode, callback) {\n  return walkImmediateSubNodes(rootNode, node => {\n    if (callback(node) === false) {\n      return false;\n    }\n    if (node.firstChild) {\n      if (walkNodesDepthFirst(node, callback) === false) {\n        return false;\n      }\n    }\n  });\n}\n\nexport function walkImmediateSubNodes(parentNode, callback) {\n  if (parentNode) {\n    for (let node = parentNode.firstChild; !!node; node = node.nextSibling) {\n      if (callback(node) === false) {\n        return false;\n      }\n    }\n  }\n}\n\nexport function findNextMatchingNode(fromNode, predicate) {\n  let currentNode = fromNode;\n  let finishedSubTree = false;\n\n  while (currentNode) {\n    if (!finishedSubTree && currentNode.firstChild) {\n      currentNode = currentNode.firstChild;\n    } else {\n      finishedSubTree = false;\n      if (currentNode.nextSibling) {\n        currentNode = currentNode.nextSibling;\n      } else {\n        finishedSubTree = true;\n        currentNode = currentNode.parent;\n      }\n    }\n\n    if (!finishedSubTree && predicate(currentNode)) {\n      return currentNode;\n    }\n  }\n}\n\nexport function findPrevMatchingNode(fromNode, predicate) {\n  let currentNode = fromNode;\n  let finishedSubTree = false;\n\n  while (currentNode) {\n    if (!finishedSubTree && currentNode.lastChild) {\n      currentNode = currentNode.lastChild;\n    } else {\n      finishedSubTree = false;\n      if (currentNode.prevSibling) {\n        currentNode = currentNode.prevSibling;\n      } else {\n        finishedSubTree = true;\n        currentNode = currentNode.parent;\n      }\n    }\n\n    if (!finishedSubTree && predicate(currentNode)) {\n      return currentNode;\n    }\n  }\n}\n\nfunction createTraceNodeMap() {\n  let mapByTraceId = {};\n\n  const getOrAddTraceSpanNodeMap = traceId => {\n    const existingMap = mapByTraceId[traceId];\n    if (existingMap) {\n      return existingMap;\n    }\n\n    const newMap = createSpanNodeMap();\n    mapByTraceId[traceId] = newMap;\n    return newMap;\n  };\n\n  return {\n    getSpanNode(traceId, spanId) {\n      const spanNodeMap = getOrAddTraceSpanNodeMap(traceId);\n      return spanNodeMap.getSpanNode(spanId);\n    },\n    setSpanNode(traceId, spanId, node) {\n      const spanNodeMap = getOrAddTraceSpanNodeMap(traceId);\n      return spanNodeMap.setSpanNode(spanId, node);\n    }\n  };\n}\n\nfunction createSpanNodeMap() {\n  let nodeBySpanId = {};\n\n  return {\n    getSpanNode(spanId) {\n      return nodeBySpanId[spanId];\n    },\n    setSpanNode(spanId, node) {\n      nodeBySpanId[spanId] = node;\n    }\n  };\n}\n","import { LOG_LEVEL } from \"./logLevel\";\n\n//let currentScopeManager = createInternalScopeManager();\n\n// export function trace(promiseOrFunc) {\n//   const logToActiveSpan = tags => {\n//     const activeSpan = currentScopeManager.getActiveSpan();\n//     if (activeSpan) {\n//       activeSpan.log(tags);\n//     }\n//   };\n\n//   const callerScopeManager = currentScopeManager.clone();\n\n//   const originalPromise =\n//     typeof promiseOrFunc === \"function\" ? promiseOrFunc() : promiseOrFunc;\n\n//   const saveScopeManager = currentScopeManager;\n\n//   const wrapperPromise = new Promise((resolve, reject) => {\n//     originalPromise\n//       .then(value => {\n//         currentScopeManager = saveScopeManager;\n//         logToActiveSpan({\n//           $id: \"async-then\",\n//           $async: \"then\",\n//           level: LOG_LEVEL.debug,\n//           value\n//         });\n//         resolve(value);\n//       })\n//       .catch(err => {\n//         currentScopeManager = saveScopeManager;\n//         logToActiveSpan({\n//           $id: \"async-catch\",\n//           $async: \"catch\",\n//           level: LOG_LEVEL.error,\n//           error: {\n//             message: err.message,\n//             stack: err.stack\n//           }\n//         });\n//         reject(err);\n//       });\n//   });\n\n//   currentScopeManager = callerScopeManager;\n//   return wrapperPromise;\n// }\n\nexport function createDefaultScopeManager(asyncLocalProvider) {\n  const activeTracer = asyncLocalProvider.createAsyncLocal();\n  const activeSpan = asyncLocalProvider.createAsyncLocal();\n\n  const logToActiveSpan = tags => {\n    const span = activeSpan.get();\n    if (span) {\n      span.log(tags);\n    }\n  };\n\n  asyncLocalProvider.addPromiseCompletionHook(value => {\n    //console.log('COMPLETION-HOOK!');\n    logToActiveSpan({\n      $id: \"async-then\",\n      $async: \"then\",\n      level: LOG_LEVEL.debug,\n      value\n    });\n  });\n\n  asyncLocalProvider.addPromiseRejectionHook(err => {\n    //console.log('REJECTION-HOOK!');\n    logToActiveSpan({\n      $id: \"async-catch\",\n      $async: \"catch\",\n      level: LOG_LEVEL.error,\n      error: {\n        message: err.message,\n        stack: err.stack\n      }\n    });\n  });\n\n  return {\n    getActiveTracer() {\n      return activeTracer.get();\n    },\n    getActiveSpan() {\n      return activeSpan.get();\n    },\n    setActiveTracer(tracer) {\n      activeTracer.set(tracer);\n    },\n    setActiveSpan(span) {\n      activeSpan.set(span);\n    }\n  };\n}\n\nexport function resetCurrentScope() {}\n","import {\n  createRootNode,\n  createRegularNode,\n  appendChildNodeToParent,\n  getNodesAsFlatArray,\n  getTopLevelNodesAsArray,\n  walkNodesDepthFirst,\n  findNextMatchingNode,\n  findPrevMatchingNode\n} from \"./codePathModel\";\n\nimport { createMulticastDelegate } from \"./multicastDelegate\";\n\nexport function createCodePathSearchModel(sourceModel, predicate) {\n  const insertNodesCallbacks = createMulticastDelegate(\n    \"CodePathSearchModel.insertNodes\"\n  );\n  const updateNodesCallbacks = createMulticastDelegate(\n    \"CodePathSearchModel.updateNodes\"\n  );\n\n  let resultNodeById = {};\n  let newlyCreatedResultNodes = undefined;\n  let resultRootNode = undefined;\n\n  const initializeFromSourceModel = () => {\n    resultNodeById = {};\n    newlyCreatedResultNodes = undefined;\n    resultRootNode = performSearch();\n  };\n\n  const sourceModelSubscriber = {\n    insertNodes: handleInsertedSourceNodes,\n    updateNodes: handleUpdatedSourceNodes\n  };\n\n  sourceModel.subscribe(sourceModelSubscriber);\n  initializeFromSourceModel();\n\n  return {\n    getRootNode() {\n      return resultRootNode;\n    },\n    getNodesFlat() {\n      return getNodesAsFlatArray(resultRootNode);\n    },\n    getTopLevelNodes() {\n      return getTopLevelNodesAsArray(resultRootNode);\n    },\n    getFirstMatchedNode() {\n      let firstMatchedNode = undefined;\n      walkNodesDepthFirst(resultRootNode, node => {\n        if (node.matched) {\n          firstMatchedNode = node;\n          return false;\n        }\n      });\n      return firstMatchedNode;\n    },\n    getNextMatchedNode(matchedNode) {\n      return findNextMatchingNode(matchedNode, node => node.matched);\n    },\n    getPrevMatchedNode(matchedNode) {\n      return findPrevMatchingNode(matchedNode, node => node.matched);\n    },\n    subscribe(subscriber) {\n      if (subscriber.insertNodes) {\n        insertNodesCallbacks.add(subscriber.insertNodes);\n      }\n      if (subscriber.updateNodes) {\n        updateNodesCallbacks.add(subscriber.updateNodes);\n      }\n    },\n    unsubscribe(subscriber) {\n      if (subscriber.insertNodes) {\n        insertNodesCallbacks.remove(subscriber.insertNodes);\n      }\n      if (subscriber.updateNodes) {\n        updateNodesCallbacks.remove(subscriber.updateNodes);\n      }\n    },\n    unsubscribeFromSource() {\n      sourceModel.unsubscribe(handleInsertedSourceNodes);\n    },\n    clearAll() {\n      sourceModel.clearAll();\n      initializeFromSourceModel();\n    }\n  };\n\n  function performSearch() {\n    const sourceRootNode = sourceModel.getRootNode();\n    const resultRootNode = createRootNode();\n    resultNodeById[resultRootNode.id] = resultRootNode;\n\n    depthFirstSearchSubTree(sourceRootNode, () => resultRootNode);\n\n    return resultRootNode;\n  }\n\n  function depthFirstSearchSubTree(node, getResultParentNode) {\n    const createThisResultNode = matched => {\n      return createResultNode(node, matched, getResultParentNode);\n    };\n\n    const isRootNode = !node.parent;\n    const thisNodeMatched = !isRootNode && predicate(node);\n    let thisResultNode = thisNodeMatched\n      ? createThisResultNode(true)\n      : undefined;\n\n    for (\n      let subNode = node.firstChild;\n      !!subNode;\n      subNode = subNode.nextSibling\n    ) {\n      depthFirstSearchSubTree(subNode, () => {\n        if (!thisResultNode) {\n          thisResultNode = isRootNode\n            ? getResultParentNode()\n            : createThisResultNode(false);\n        }\n        return thisResultNode;\n      });\n    }\n  }\n\n  function createResultNode(sourceNode, matched, getResultParentNode) {\n    const resultParentNode = getResultParentNode();\n    let resultNode = createRegularNode(\n      sourceNode.id,\n      resultParentNode,\n      sourceNode.entry,\n      sourceModel.extractEntryMetrics\n    );\n    resultNodeById[resultNode.id] = resultNode;\n    if (newlyCreatedResultNodes) {\n      newlyCreatedResultNodes.push(resultNode);\n    }\n    appendChildNodeToParent(resultNode, resultParentNode);\n    resultNode.sourceNode = sourceNode;\n    resultNode.matched = matched;\n    if (sourceNode.matchHighlight) {\n      // TODO: make predicate return { matched, highlight }\n      resultNode.matchHighlight = sourceNode.matchHighlight;\n      sourceNode.matchHighlight = undefined;\n    }\n    return resultNode;\n  }\n\n  function getOrCreateResultParentNode(sourceChildNode) {\n    if (!sourceChildNode.parent) {\n      return;\n    }\n    const existingParent = resultNodeById[sourceChildNode.parent.id];\n    if (existingParent) {\n      return existingParent;\n    }\n    return createResultNode(sourceChildNode.parent, false, () =>\n      getOrCreateResultParentNode(sourceChildNode.parent)\n    );\n  }\n\n  function handleInsertedSourceNodes(insertedNodes) {\n    newlyCreatedResultNodes = [];\n    const matchingNodes = insertedNodes.filter(predicate);\n\n    matchingNodes.forEach(sourceNode => {\n      const getParentNode = () => {\n        return getOrCreateResultParentNode(sourceNode);\n      };\n      createResultNode(sourceNode, true, getParentNode);\n    });\n\n    if (newlyCreatedResultNodes.length > 0) {\n      insertNodesCallbacks.invoke(newlyCreatedResultNodes);\n    }\n    newlyCreatedResultNodes = undefined;\n  }\n\n  function handleUpdatedSourceNodes(updatedNodes) {}\n}\n","import { walkNodesDepthFirst } from \"./codePathModel\";\n\nexport function aggregateSpanStats(rootNode) {\n  let entryByMessageId = new Map();\n\n  walkNodesDepthFirst(rootNode, node => {\n    if (node.entry) {\n      let statsEntry = getOrAddEntry(node.entry.messageId);\n      statsEntry.count++;\n      statsEntry.totalDuration += node.entry.duration;\n    }\n  });\n\n  const statsLines = [...entryByMessageId.values()].map(statsEntry => {\n    statsEntry.avgDuration =\n      statsEntry.count > 0 ? statsEntry.totalDuration / statsEntry.count : 0;\n    return statsEntry;\n  });\n\n  return statsLines.sort((a, b) => a.totalDuration - b.totalDuration);\n\n  function getOrAddEntry(messageId) {\n    const existingEntry = entryByMessageId.get(messageId);\n    if (existingEntry) {\n      return existingEntry;\n    }\n    const newEntry = {\n      messageId,\n      count: 0,\n      totalDuration: 0,\n      avgDuration: 0\n    };\n    entryByMessageId.set(messageId, newEntry);\n    return newEntry;\n  }\n}\n","import { REFERENCE_FOLLOWS_FROM, REFERENCE_CHILD_OF } from \"opentracing\";\nimport { isTagSerializable, addTagMetaStringify } from \"./serializable\";\n\nexport function createCodePathStream(options) {\n  const isStripTagsMode = options && options.stripTags;\n  let entries = [];\n  let isEnabled = options ? !!options.enabled : true;\n  let strippedTagsById = {};\n  let nextStrippedTagsId = 1;\n\n  return {\n    writeStartTracer(time, traceId, tags) {\n      if (!isEnabled) {\n        return;\n      }\n      entries.push({\n        time,\n        token: \"StartTracer\",\n        traceId,\n        tags: includeOrStripTags(tags)\n      });\n    },\n    writeStartSpan(time, traceId, spanId, messageId, references, tags, epoch) {\n      if (!isEnabled) {\n        return;\n      }\n      const { childOf, followsFrom } = references;\n      entries.push({\n        time,\n        epoch,\n        token: \"StartSpan\",\n        traceId,\n        spanId,\n        childOf,\n        followsFrom,\n        messageId,\n        tags: includeOrStripTags(tags)\n      });\n    },\n    writeEndSpan(time, traceId, spanId, tags) {\n      if (!isEnabled) {\n        return;\n      }\n      entries.push({\n        time,\n        token: \"EndSpan\",\n        traceId,\n        spanId,\n        tags: includeOrStripTags(tags)\n      });\n    },\n    writeLog(time, traceId, spanId, messageId, tags) {\n      if (!isEnabled) {\n        return;\n      }\n      entries.push({\n        time,\n        token: \"Log\",\n        traceId,\n        spanId,\n        messageId,\n        tags: includeOrStripTags(tags)\n      });\n    },\n    writeSpanTags(time, traceId, spanId, tags) {\n      if (!isEnabled) {\n        return;\n      }\n      entries.push({\n        time,\n        token: \"SpanTags\",\n        traceId,\n        spanId,\n        tags: includeOrStripTags(tags)\n      });\n    },\n    enable(value) {\n      const effectiveValue = typeof value === \"undefined\" ? true : !!value;\n      isEnabled = effectiveValue;\n    },\n    peekEntries() {\n      return entries;\n    },\n    takeEntries() {\n      const copyOfEntries = entries;\n      entries = [];\n      if (!isStripTagsMode) {\n        copyOfEntries.forEach(entry => normalizeTags(entry.tags));\n      }\n      return copyOfEntries;\n    },\n    clearAll() {\n      entries = [];\n      strippedTagsById = {};\n    },\n    getStrippedTags(ids) {\n      if (!isStripTagsMode) {\n        throw new Error(\"CodePathStream is not in stripped tags mode\");\n      }\n\n      let result = {};\n      ids.forEach(id => {\n        result[id] = strippedTagsById[id];\n        normalizeTags(strippedTagsById[id]);\n      });\n      return result;\n    }\n  };\n\n  function includeOrStripTags(tags) {\n    if (!tags) {\n      return {};\n    }\n    if (isStripTagsMode && Object.keys(tags).length > 0) {\n      const $$id = nextStrippedTagsId++;\n      strippedTagsById[$$id] = tags;\n      return { $$id };\n    }\n    return tags;\n  }\n\n  function normalizeTags(tags) {\n    let visitedObjects;\n\n    if (typeof tags === \"object\") {\n      visitedObjects = new Set();\n\n      for (let key in tags) {\n        const value = tags[key];\n\n        if (!isTagSerializable(value)) {\n          addTagMetaStringify(tags, key);\n          tags[key] = safeStringify(value);\n        }\n      }\n    }\n\n    function safeStringify(obj) {\n      let json = null;\n      try {\n        json = JSON.stringify(obj);\n      } catch (err) {\n        json = JSON.stringify(obj, replaceCircularReferences);\n      }\n      if (json && json.length > 16384) {\n        return json.substr(0, 16384) + \"...[trunc]\";\n      }\n      return json;\n    }\n\n    function replaceCircularReferences(key, value) {\n      if (typeof value === \"object\" && value !== null) {\n        if (visitedObjects.has(value)) {\n          return \"[circ]\";\n        }\n        visitedObjects.add(value);\n      }\n      return value;\n    }\n  }\n}\n","import {\n  Tracer,\n  Span,\n  SpanContext,\n  Reference,\n  REFERENCE_FOLLOWS_FROM,\n  REFERENCE_CHILD_OF\n} from \"opentracing\";\n\nexport function createCodePathTracer(traceId, stream, options) {\n  return new CodePathTracer(traceId, stream, options);\n}\n\nclass CodePathTracer extends Tracer {\n  _traceId;\n  _clock;\n  _scopeManager;\n  _stream;\n  _nextSpanId;\n\n  constructor(traceId, stream, options) {\n    super();\n    this._traceId = traceId;\n    this._nextSpanId = 1;\n    this._clock = options.clock;\n    this._scopeManager = options.scopeManager;\n    this._stream = stream;\n\n    stream.writeStartTracer(options.clock.now(), traceId);\n  }\n\n  // NOTE: the input to this method is *always* an associative array. The\n  // public-facing startSpan() method normalizes the arguments so that\n  // all N implementations do not need to worry about variations in the call\n  // signature.\n  //\n  // The default behavior returns a no-op span.\n  // protected _startSpan(name: string, fields: SpanOptions): Span {\n  //   return Noop.span!;\n  // }\n  _startSpan(name, options) {\n    return new CodePathSpan(\n      this,\n      this._clock,\n      this._stream,\n      this._nextSpanId++,\n      name,\n      options\n    );\n  }\n\n  // The default behavior is a no-op.\n  // protected _inject(spanContext: SpanContext, format: string, carrier: any): void {\n  // }\n  _inject(spanContext, format, carrier) {}\n\n  // The default behavior is to return a no-op SpanContext.\n  // protected _extract(format: string, carrier: any): SpanContext | null {\n  //   return Noop.spanContext!;\n  // }\n  _extract(format, carrier) {\n    return new CodePathSpanContext(\"\", \"\");\n  }\n\n  getTraceId() {\n    return this._traceId;\n  }\n\n  getCurrentTime() {\n    return this._clock.now();\n  }\n}\n\nclass CodePathSpan extends Span {\n  _tracer;\n  _clock;\n  _stream;\n  _selfContext;\n  _name;\n  // _childOfContext;\n  // _followsFromContext;\n  // _operationName;\n  // _startTime;\n  // _endTime;\n  // _baggageItems;\n  // _tags;\n  // _logs;\n\n  constructor(tracer, clock, stream, spanId, name, options) {\n    super();\n\n    const traceId = tracer.getTraceId();\n\n    this._tracer = tracer;\n    this._clock = clock;\n    this._stream = stream;\n    this._selfContext = new CodePathSpanContext(traceId, spanId);\n    this._name = name;\n\n    const startTime = (options && options.startTime) || clock.now();\n    const { childOf, followsFrom } = findReferences(options);\n\n    stream.writeStartSpan(\n      startTime,\n      traceId,\n      spanId,\n      name,\n      {\n        childOf: contextToPlain(childOf),\n        followsFrom: contextToPlain(followsFrom)\n      },\n      options.tags,\n      childOf || followsFrom ? undefined : clock.epoch()\n    );\n\n    // this._operationName = name;\n    // this._startTime = (options && options.startTime) || tracer.getCurrentTime();\n    // this._endTime = undefined;\n    // this._baggageItems = {};\n    // this._tags = (options && options.tags) || {};\n    // this._logs = [];\n  }\n\n  // getData() {\n  //   return {\n  //     context: contextToPlain(this._selfContext),\n  //     childOf: contextToPlain(this._childOfContext),\n  //     followsFrom: contextToPlain(this._followsFromContext),\n  //     operationName: this._operationName,\n  //     startTime: this._startTime,\n  //     endTime: this._endTime,\n  //     baggageItems: this._baggageItems,\n  //     tags: this._tags,\n  //     logs: this._logs\n  //   };\n  // }\n\n  // By default returns a no-op SpanContext.\n  // protected _context(): SpanContext {\n  //     return noop.spanContext!;\n  // }\n  _context() {\n    return this._selfContext;\n  }\n\n  // By default returns a no-op tracer.\n  //\n  // The base class could store the tracer that created it, but it does not\n  // in order to ensure the no-op span implementation has zero members,\n  // which allows V8 to aggressively optimize calls to such objects.\n  // protected _tracer(): Tracer {\n  //     return noop.tracer!;\n  // }\n  _tracer() {\n    return this._tracer;\n  }\n\n  // By default does nothing\n  // protected _setOperationName(name: string): void {\n  // }\n  _setOperationName(name) {\n    throw new Error(\"Not supported: setOperationName\");\n    //this._operationName = name;\n  }\n\n  // By default does nothing\n  // protected _setBaggageItem(key: string, value: string): void {\n  // }\n  _setBaggageItem(key, value) {\n    throw new Error(\"Not supported: setBaggageItem\");\n    //this._baggageItems[key] = value;\n  }\n\n  // By default does nothing\n  // protected _getBaggageItem(key: string): string | undefined {\n  //     return undefined;\n  // }\n  _getBaggageItem(key) {\n    return undefined;\n    //return this._baggageItems[key];\n  }\n\n  // By default does nothing\n  //\n  // NOTE: both setTag() and addTags() map to this function. keyValuePairs\n  // will always be an associative array.\n  // protected _addTags(keyValuePairs: { [key: string]: any }): void {\n  // }\n  _addTags(keyValuePairs) {\n    const { traceId, spanId } = contextToPlain(this._selfContext);\n    this._stream.writeSpanTags(\n      this._clock.now(),\n      traceId,\n      spanId,\n      keyValuePairs\n    );\n    // this._tags = {\n    //   ...this._tags,\n    //   ...keyValuePairs\n    // };\n  }\n\n  // By default does nothing\n  // protected _log(keyValuePairs: { [key: string]: any }, timestamp?: number): void {\n  // }\n  _log(keyValuePairs, timestamp) {\n    const time = timestamp || this._clock.now();\n    const { traceId, spanId } = contextToPlain(this._selfContext);\n    this._stream.writeLog(\n      time,\n      traceId,\n      spanId,\n      keyValuePairs.$id,\n      keyValuePairs\n    );\n    // const logEntry = {\n    //   ...(keyValuePairs || {}),\n    //   $time: timestamp || this._tracer.getCurrentTime()\n    // };\n    // this._logs.push(logEntry);\n  }\n\n  // By default does nothing\n  //\n  // finishTime is expected to be either a number or undefined.\n  // protected _finish(finishTime?: number): void {\n  // }\n  _finish(finishTime) {\n    const effectiveFinishTime = finishTime || this._clock.now();\n    const { traceId, spanId } = contextToPlain(this._selfContext);\n    this._stream.writeEndSpan(effectiveFinishTime, traceId, spanId);\n\n    // if (this._endTime) {\n    //   throw new Error(\"Invalid operation: span already finished\");\n    // }\n    // this._endTime = finishTime || this._tracer.getCurrentTime();\n  }\n}\n\nclass CodePathSpanContext extends SpanContext {\n  _traceId;\n  _spanId;\n\n  constructor(traceId, spanId) {\n    super();\n    this._traceId = traceId;\n    this._spanId = spanId;\n  }\n\n  /**\n   * Returns a string representation of the implementation internal trace ID.\n   *\n   * @returns {string}\n   */\n  toTraceId() {\n    return this._traceId;\n  }\n\n  /**\n   * Returns a string representation of the implementation internal span ID.\n   *\n   * @returns {string}\n   */\n  toSpanId() {\n    return this._spanId;\n  }\n}\n\nfunction findReferences(options) {\n  let childOf = undefined;\n  let followsFrom = undefined;\n\n  options &&\n    options.references &&\n    options.references.forEach(ref => {\n      switch (ref.type()) {\n        case REFERENCE_CHILD_OF:\n          childOf = ref.referencedContext();\n          break;\n        case REFERENCE_FOLLOWS_FROM:\n          followsFrom = ref.referencedContext();\n          break;\n      }\n    });\n\n  return {\n    childOf,\n    followsFrom\n  };\n}\n\nexport function contextToPlain(context) {\n  if (context) {\n    return {\n      traceId: context.toTraceId(),\n      spanId: context.toSpanId()\n    };\n  }\n}\n\nexport function plainToContext({ traceId, spanId }) {\n  return new CodePathSpanContext(traceId, spanId);\n}\n","import { createRealClock } from \"./codePath\";\n\nexport function createDebounce(consumer, interval, optionalClock) {\n  const clock = optionalClock || createRealClock();\n  let timeoutId = undefined;\n\n  return {\n    bounce() {\n      if (timeoutId) {\n        clock.clearTimeout(timeoutId);\n      }\n      timeoutId = clock.setTimeout(() => {\n        timeoutId = undefined;\n        consumer();\n      }, interval);\n    }\n  };\n}\n","let logSwitch = undefined;\n\nexport function createDebugLog(component, globalVars) {\n  ensureLogSwitchInitialized();\n\n  return {\n    log(...args) {\n      if (logSwitch.isEnabled) {\n        console.log(...args);\n      }\n    },\n    info(...args) {\n      if (logSwitch.isEnabled) {\n        console.info(...args);\n      }\n    },\n    warn(...args) {\n      if (logSwitch.isEnabled) {\n        console.warn(...args);\n      }\n    },\n    error(...args) {\n      if (logSwitch.isEnabled) {\n        console.error(...args);\n      }\n    }\n  };\n\n  function ensureLogSwitchInitialized() {\n    if (!logSwitch) {\n      logSwitch = {\n        component,\n        isEnabled: false,\n        setEnabled: createSetEnabled(component, globalVars)\n      };\n    }\n  }\n}\n\nexport function enableDebugLog(enable) {\n  if (logSwitch) {\n    logSwitch.setEnabled(enable);\n    console.log(\n      \"CODEPATH.DEBUG-LOG>\",\n      `log switch [${logSwitch.component}] was set to`,\n      enable\n    );\n  } else {\n    console.log(\"CODEPATH.DEBUG-LOG>\", \"log switch was not initialized\");\n  }\n}\n\nfunction createSetEnabled(component, globalVars) {\n  const createEnableLogMessage = enable => {\n    return {\n      type: \"codePath/devTools/enableDebugLog\",\n      enable: !!enable\n    };\n  };\n\n  const handleEnableLogMessage = message => {\n    if (\n      typeof message === \"object\" &&\n      message.type === \"codePath/devTools/enableDebugLog\" &&\n      typeof message.enable === \"boolean\"\n    ) {\n      enableDebugLog(message.enable, true);\n    }\n  };\n\n  switch (component) {\n    case \"page\":\n      return enable => {\n        logSwitch.isEnabled = !!enable;\n        window.postMessage(createEnableLogMessage(enable), \"*\");\n      };\n    case \"content\":\n      window.addEventListener(\"message\", event => {\n        handleEnableLogMessage(event.data);\n      });\n      return enable => {\n        logSwitch.isEnabled = !!enable;\n        chrome.runtime.sendMessage(createEnableLogMessage(enable));\n      };\n    case \"background\":\n      chrome.runtime.onMessage.addListener(function(\n        request,\n        sender,\n        sendResponse\n      ) {\n        handleEnableLogMessage(request);\n      });\n      return enable => {\n        logSwitch.isEnabled = !!enable;\n      };\n    case \"devtool\":\n      globalVars &&\n        globalVars.backgroundConnection.onMessage.addListener(function(\n          message\n        ) {\n          handleEnableLogMessage(message);\n        });\n      return enable => {\n        logSwitch.isEnabled = !!enable;\n      };\n    default:\n      return enable => {\n        logSwitch.isEnabled = !!enable;\n      };\n  }\n}\n","export { createCodePath, createRealClock } from \"./codePath\";\nexport {\n  createAsyncLocalProvider,\n  restoreOriginalPromise\n} from \"./asyncLocalProvider\";\nexport {\n  createDefaultScopeManager,\n  resetCurrentScope\n} from \"./codePathScopeManager\";\nexport { createCodePathStream } from \"./codePathStream\";\nexport {\n  createCodePathTracer,\n  contextToPlain,\n  plainToContext\n} from \"./codePathTracer\";\nexport {\n  createCodePathModel,\n  walkNodesDepthFirst,\n  walkImmediateSubNodes,\n  findNextMatchingNode,\n  findPrevMatchingNode\n} from \"./codePathModel\";\nexport { createCodePathSearchModel } from \"./codePathSearchModel\";\nexport { createCodePathFlatFilterModel } from \"./codePathFlatFilterModel\";\nexport { createTreeGridController, createTreeGridView } from \"./treeGrid\";\nexport { createMulticastDelegate } from \"./multicastDelegate\";\nexport { createDebounce } from \"./debounce\";\nexport { createResizer } from \"./resizer\";\nexport { LOG_LEVEL } from \"./logLevel\";\nexport { createDebugLog, enableDebugLog } from \"./debugLog\";\nexport { isTagSerializable, addTagMetaStringify } from \"./serializable\";\nexport { aggregateSpanStats } from \"./codePathSpanStats\";\n","export const LOG_LEVEL = {\n  debug: 0,\n  event: 1,\n  warning: 2,\n  error: 3,\n  critical: 4\n};\n","export function createMulticastDelegate(eventName) {\n  let subscribers = [];\n\n  const delegate = {\n    add(subscriber) {\n      delegate.remove(subscriber);\n      subscribers.push(subscriber);\n    },\n    remove(subscriber) {\n      subscribers = subscribers.filter(s => s !== subscriber);\n    },\n    invoke(...args) {\n      subscribers.forEach(subscriber => {\n        try {\n          subscriber(...args);\n        } catch (e) {\n          console.log(`Event [${eventName}] invocation failed!`, e);\n        }\n      });\n    }\n  };\n\n  return delegate;\n}\n","export function createResizer(elements) {\n  const minWidthPx = 10;\n  const moveThresholdPx = 3;\n  const { gripElement, leftSideElement, rightSideElement } = elements;\n\n  let initial = undefined;\n  let last = undefined;\n  let saveBodyCursor = undefined;\n\n  gripElement.onmousedown = onMouseDown;\n\n  function takeSnapshot(e) {\n    return {\n      mouseX: e.pageX,\n      leftWidth: leftSideElement ? leftSideElement.clientWidth : undefined,\n      rightWidth: rightSideElement ? rightSideElement.clientWidth : undefined\n    };\n  }\n\n  function onMouseDown(e) {\n    initial = takeSnapshot(e);\n    last = Object.assign({}, initial);\n\n    window.addEventListener(\"mousemove\", onMouseMove, true);\n    window.addEventListener(\"mouseup\", onMouseUp, true);\n\n    saveBodyCursor = document.body.style.cursor;\n    document.body.style.cursor = \"ew-resize\";\n\n    e.stopPropagation();\n    return false;\n  }\n\n  function onMouseMove(e) {\n    const current = takeSnapshot(e);\n\n    if (Math.abs(current.mouseX - last.mouseX) >= moveThresholdPx) {\n      last = current;\n      let deltaX = current.mouseX - initial.mouseX;\n\n      if (\n        initial.leftWidth &&\n        deltaX < 0 &&\n        initial.leftWidth + deltaX < minWidthPx\n      ) {\n        deltaX = -(initial.leftWidth - minWidthPx);\n      }\n      if (\n        initial.rightWidth &&\n        deltaX > 0 &&\n        initial.rightWidth - deltaX < minWidthPx\n      ) {\n        deltaX = initial.rightWidth - minWidthPx;\n      }\n\n      if (leftSideElement && leftSideElement.style.width.length > 0) {\n        leftSideElement.style.width = `${initial.leftWidth + deltaX}px`;\n      }\n      if (rightSideElement && rightSideElement.style.width.length > 0) {\n        rightSideElement.style.width = `${initial.rightWidth - deltaX}px`;\n      }\n    }\n    e.stopPropagation();\n    return false;\n  }\n\n  function onMouseUp(e) {\n    document.body.style.cursor = saveBodyCursor;\n    window.removeEventListener(\"mousemove\", onMouseMove, true);\n    window.removeEventListener(\"mouseup\", onMouseUp, true);\n\n    initial = undefined;\n    last = undefined;\n\n    e.stopPropagation();\n    return false;\n  }\n}\n","export function isTagSerializable(value) {\n  if (!value) {\n    return true;\n  }\n  const type = typeof value;\n  if (type === \"function\") {\n    return false;\n  }\n  if (type === \"object\") {\n    if (Array.isArray(value)) {\n      for (let i = 0; i < value.length; i++) {\n        if (!isTagSerializable(value[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n  return true;\n}\n\nexport function addTagMetaStringify(tags, tag) {\n  if (tags.$meta && tags.$meta.stringify) {\n    tags.$meta.stringify.push(tag);\n  } else {\n    tags.$meta = {\n      stringify: [tag]\n    };\n  }\n}\n","import { createMulticastDelegate } from \"./multicastDelegate\";\nimport { createCodePathModel } from \"./codePathModel\";\n\nexport function createTreeGridController(view, model) {\n  let rowById = {};\n  let masterIndexVersion = 1;\n\n  //setInterval(() => console.log(rowById), 1000);\n\n  const subscriber = {\n    insertNodes: handleInsertedNodes,\n    updateNodes: handleUpdatedNodes\n  };\n\n  const controller = {\n    getNodeById(id) {\n      const row = rowById[id];\n      if (row) {\n        return row.getNode();\n      }\n    },\n    toggle(id) {\n      return rowById[id].toggle();\n    },\n    expand(id) {\n      rowById[id].expand();\n    },\n    collapse(id) {\n      rowById[id].collapse();\n    },\n    selectNode(node) {\n      controller.expandToNode(node);\n      const nodeRow = rowById[node.id];\n      const nodeRowIndex = nodeRow.findAbsoluteIndex();\n      view.selectNode(nodeRowIndex, node);\n    },\n    expandToNode(node) {\n      if (!rowById[node.id]) {\n        controller.expandToNode(node.parent);\n        controller.expand(node.parent.id);\n      }\n    },\n    getIsExpanded(id) {\n      const row = rowById[id];\n      return row ? row.getIsExpanded() : false;\n    },\n    getIsVisible(id) {\n      const row = rowById[id];\n      return row ? rowById[id].getIsVisible() : false;\n    },\n    replaceModel(newModel) {\n      model.unsubscribe(subscriber);\n      model = newModel;\n      initWithCurrentModel();\n    },\n    clearAll() {\n      model.clearAll();\n      controller.replaceModel(model);\n    },\n    onNodeSelected(callback) {\n      view.onNodeSelected(callback);\n    }\n  };\n\n  view.attachController(controller);\n  initWithCurrentModel();\n  return controller;\n\n  function initWithCurrentModel() {\n    rowById = {};\n    masterIndexVersion = 1;\n    initRootNode();\n    view.clearAll();\n    subscriber.insertNodes(model.getTopLevelNodes());\n    model.subscribe(subscriber);\n  }\n\n  function createSubNodesRowControllers(subNodes) {\n    for (let node of subNodes) {\n      const row = createRowController(node);\n      rowById[node.id] = row;\n    }\n  }\n\n  function createRowController(node) {\n    let isExpanded = false;\n    let subTreeHeight = 0;\n    let cachedAbsoluteIndex = undefined;\n    let cachedIndexVersion = masterIndexVersion;\n\n    const getNode = () => {\n      return node;\n    };\n    const getParent = () => {\n      return rowById[node.parent.id];\n    };\n    const getPrevSibling = () => {\n      return node.prevSibling ? rowById[node.prevSibling.id] : undefined;\n    };\n    const getNextSibling = () => {\n      return node.nextSibling ? rowById[node.nextSibling.id] : undefined;\n    };\n    const getFirstChild = () => {\n      return node.firstChild ? rowById[node.firstChild.id] : undefined;\n    };\n    const getIsExpanded = () => {\n      return isExpanded;\n    };\n    const getIsVisible = () => {\n      const parent = getParent();\n      return parent.getIsVisible() && parent.getIsExpanded();\n    };\n    const getSubTreeHeight = () => {\n      return subTreeHeight;\n    };\n    const updateSubTreeHeight = delta => {\n      subTreeHeight += delta;\n      cachedIndexVersion = masterIndexVersion;\n      getParent().updateSubTreeHeight(delta);\n    };\n    const getIndexVersion = () => {\n      return masterIndexVersion;\n    };\n    const isCachedAbsoluteIndexValid = () => {\n      return !!cachedAbsoluteIndex && cachedIndexVersion === masterIndexVersion;\n    };\n    const findAbsoluteIndex = () => {\n      if (!isCachedAbsoluteIndexValid()) {\n        let indexRelativeToParent = 0;\n        for (\n          let sibling = getPrevSibling();\n          !!sibling;\n          sibling = sibling.getPrevSibling()\n        ) {\n          indexRelativeToParent += 1 + sibling.getSubTreeHeight();\n        }\n        const parentAbsoluteIndex = getParent().findAbsoluteIndex();\n        cachedAbsoluteIndex = parentAbsoluteIndex + indexRelativeToParent + 1;\n        cachedIndexVersion = masterIndexVersion;\n      }\n      return cachedAbsoluteIndex;\n    };\n    const showSubNodes = subNodes => {\n      if (!getIsVisible() || !getIsExpanded()) {\n        return;\n      }\n      const thisRowIndex = findAbsoluteIndex();\n      createSubNodesRowControllers(subNodes);\n      view.insertNodes(thisRowIndex + subTreeHeight + 1, subNodes);\n      masterIndexVersion++;\n      updateSubTreeHeight(+subNodes.length);\n      view.updateNode(thisRowIndex, node);\n    };\n    const hideSubNodes = () => {\n      if (!getIsVisible() || subTreeHeight === 0) {\n        return;\n      }\n      const thisRowIndex = findAbsoluteIndex();\n      const removedNodeIds = view.removeNodes(thisRowIndex + 1, subTreeHeight);\n      removedNodeIds && removedNodeIds.forEach(id => delete rowById[id]);\n      masterIndexVersion++;\n      updateSubTreeHeight(-subTreeHeight);\n      view.updateNode(thisRowIndex, node);\n    };\n    const toggle = () => {\n      if (isExpanded) {\n        collapse();\n      } else {\n        expand();\n      }\n      return {\n        isExpanded\n      };\n    };\n    const expand = () => {\n      if (isExpanded || !node.firstChild) {\n        return;\n      }\n      const subNodes = [];\n      for (\n        let subNode = node.firstChild;\n        !!subNode;\n        subNode = subNode.nextSibling\n      ) {\n        subNodes.push(subNode);\n      }\n      isExpanded = true;\n      showSubNodes(subNodes);\n    };\n    const collapse = () => {\n      isExpanded = false;\n      hideSubNodes();\n    };\n\n    return {\n      getNode,\n      getParent,\n      getPrevSibling,\n      getNextSibling,\n      getFirstChild,\n      getIsExpanded,\n      getIsVisible,\n      getSubTreeHeight,\n      updateSubTreeHeight,\n      getIndexVersion,\n      findAbsoluteIndex,\n      toggle,\n      expand,\n      collapse,\n      showSubNodes\n    };\n  }\n\n  function createRootNodeController(rootNode) {\n    let subTreeHeight = 0;\n    const noop = () => {};\n\n    return {\n      getNode: () => rootNode,\n      getParent: noop,\n      getPrevSibling: noop,\n      getNextSibling: noop,\n      getFirstChild: noop,\n      getIsExpanded: () => true,\n      getIsVisible: () => true,\n      getSubTreeHeight: () => subTreeHeight,\n      updateSubTreeHeight(delta) {\n        subTreeHeight += delta;\n      },\n      getIndexVersion: () => masterIndexVersion,\n      findAbsoluteIndex: () => -1,\n      toggle: noop,\n      expand: noop,\n      collapse: noop,\n      showSubNodes(subNodes) {\n        createSubNodesRowControllers(subNodes);\n        view.insertNodes(subTreeHeight, subNodes);\n        subTreeHeight += subNodes.length;\n      }\n    };\n  }\n\n  function handleInsertedNodes(insertedNodes) {\n    let currentGroup = undefined;\n\n    for (let i = 0; i < insertedNodes.length; i++) {\n      const parentId = insertedNodes[i].parent.id;\n      const parentRow = rowById[parentId];\n      if (!currentGroup || currentGroup.parentId !== parentId) {\n        beginNewGroup(i);\n      }\n    }\n\n    endCurrentGroup(insertedNodes.length);\n\n    function beginNewGroup(index) {\n      endCurrentGroup(index);\n      currentGroup = {\n        parentId: insertedNodes[index].parent.id,\n        startIndex: index\n      };\n    }\n\n    function endCurrentGroup(index) {\n      if (currentGroup && currentGroup.startIndex < index) {\n        const parentRow = rowById[currentGroup.parentId];\n        if (parentRow) {\n          const nodesInGroup = insertedNodes.slice(\n            currentGroup.startIndex,\n            index\n          );\n          parentRow.showSubNodes(nodesInGroup);\n        }\n      }\n    }\n  }\n\n  function handleUpdatedNodes(updatedNodes) {\n    updatedNodes.forEach(node => {\n      const row = rowById[node.id];\n      if (row) {\n        const index = row.findAbsoluteIndex();\n        view.updateNode(index, node);\n      }\n    });\n  }\n\n  function initRootNode() {\n    const rootNode = model.getRootNode();\n    rowById[rootNode.id] = createRootNodeController(rootNode);\n  }\n}\n\nexport function createTreeGridView(table, columns, rows) {\n  const nodeSelectedCallbacks = createMulticastDelegate(\n    \"TreeGridView.NodeSelected\"\n  );\n  const keyPressedCallbacks = createMulticastDelegate(\n    \"TreeGridView.KeyPressed\"\n  );\n\n  table.onkeydown = e => {\n    if (handleTableKeyboardEvent(e) === true) {\n      e.stopPropagation();\n      return false;\n    }\n    keyPressedCallbacks.invoke(e);\n    return !e.defaultPrevented;\n  };\n\n  let tbody = document.createElement(\"tbody\");\n  table.appendChild(tbody);\n\n  let controller = undefined;\n  let selectedTr = undefined;\n\n  const stringToTextNode = element => {\n    if (typeof element === \"string\") {\n      return document.createTextNode(element);\n    }\n    return element;\n  };\n\n  const renderCell = (node, rowIndex, colIndex, tr, td) => {\n    const column = columns[colIndex];\n    const tdClass =\n      column.getTdClass && column.getTdClass(node, controller, rowIndex);\n    tdClass && td.classList.add(tdClass);\n    const tdContents = column.renderCell(node, controller, rowIndex);\n    tdContents &&\n      tdContents\n        .filter(htmlNode => !!htmlNode)\n        .map(stringToTextNode)\n        .forEach(htmlNode => td.appendChild(htmlNode));\n  };\n\n  const attachController = theController => {\n    controller = theController;\n  };\n\n  const applyTrClasses = (tr, node, index) => {\n    const isExpanded = controller.getIsExpanded(node.id);\n    tr.className = \"\";\n    tr.classList.add(isExpanded ? \"expanded\" : \"collapsed\");\n    if (tr === selectedTr) {\n      tr.classList.add(\"selected\");\n    }\n    if (rows && rows.getTrClasses) {\n      const trClasses = rows.getTrClasses(node, index);\n      tr.classList.add(...trClasses);\n    }\n  };\n\n  const updateNode = (index, node) => {\n    const tr = tbody.rows[index];\n    applyTrClasses(tr, node, index);\n\n    for (let colIndex = 0; colIndex < columns.length; colIndex++) {\n      const td = tr.cells[colIndex];\n      td.innerHTML = \"\";\n      renderCell(node, index, colIndex, tr, td);\n    }\n  };\n\n  const selectNode = (index, node) => {\n    if (selectedTr) {\n      selectedTr.classList.remove(\"selected\");\n    }\n    selectedTr = undefined;\n    if (typeof index === \"number\" && index >= 0) {\n      selectedTr = tbody.rows[index];\n      selectedTr.classList.add(\"selected\");\n      nodeSelectedCallbacks.invoke(node);\n      selectedTr.scrollIntoViewIfNeeded(); //TODO\n    }\n  };\n\n  const insertNodes = (index, nodes) => {\n    for (let i = 0; i < nodes.length; i++) {\n      const rowIndex = index + i;\n      const tr = tbody.insertRow(index + i);\n      tr.setAttribute(\"data-nid\", nodes[i].id);\n      applyTrClasses(tr, nodes[i], index + i);\n      tr.onclick = () => {\n        selectNode(tr.rowIndex - 1, nodes[i]);\n      };\n      for (let colIndex = 0; colIndex < columns.length; colIndex++) {\n        const td = tr.insertCell(colIndex);\n        renderCell(nodes[i], rowIndex, colIndex, tr, td);\n      }\n      tr.insertCell(columns.length);\n    }\n  };\n\n  const removeNodes = (index, count) => {\n    if (\n      selectedTr &&\n      selectedTr.rowIndex - 1 >= index &&\n      selectedTr.rowIndex - 1 < index + count\n    ) {\n      selectedTr = undefined;\n      nodeSelectedCallbacks.invoke(undefined);\n    }\n    const deletedNodeIds = [];\n    for (let i = count - 1; i >= 0; i--) {\n      const tr = tbody.rows[index + i];\n      deletedNodeIds.push(getTrNodeId(tr));\n      tbody.deleteRow(index + i);\n    }\n    return deletedNodeIds;\n  };\n\n  const clearAll = () => {\n    const newTbody = document.createElement(\"tbody\");\n    table.replaceChild(newTbody, tbody);\n    tbody = newTbody;\n    selectNode();\n  };\n\n  const onNodeSelected = callback => {\n    nodeSelectedCallbacks.add(callback);\n  };\n\n  const onKeyPressed = callback => {\n    keyPressedCallbacks.add(callback);\n  };\n\n  return {\n    attachController,\n    updateNode,\n    insertNodes,\n    removeNodes,\n    selectNode,\n    clearAll,\n    onNodeSelected,\n    onKeyPressed\n  };\n\n  function handleTableKeyboardEvent(e) {\n    if (e.ctrlKey || e.shiftKey || e.altKey) {\n      return false;\n    }\n\n    if (!selectedTr) {\n      if (tbody.rows.length > 0) {\n        selectNode(0, getTrNode(tbody.rows[0]));\n      }\n      return true;\n    }\n\n    const selectedNodeId = getTrNodeId(selectedTr);\n\n    switch (e.key) {\n      case \"ArrowLeft\":\n        if (controller.getIsExpanded(selectedNodeId)) {\n          controller.collapse(selectedNodeId);\n          return true;\n        }\n        break;\n      case \"ArrowRight\":\n        if (!controller.getIsExpanded(selectedNodeId)) {\n          controller.expand(selectedNodeId);\n          return true;\n        }\n        break;\n    }\n\n    const trToGo = getTrToGo(e.key);\n    if (trToGo) {\n      selectNode(getTrIndex(trToGo), getTrNode(trToGo));\n      return true;\n    }\n\n    return false;\n  }\n\n  function getTrToGo(keyCode) {\n    switch (keyCode) {\n      case \"ArrowUp\":\n        if (getTrIndex(selectedTr) > 0) {\n          return tbody.rows[getTrIndex(selectedTr) - 1];\n        }\n        break;\n      case \"ArrowDown\":\n        if (getTrIndex(selectedTr) < tbody.rows.length - 1) {\n          return tbody.rows[getTrIndex(selectedTr) + 1];\n        }\n        break;\n      case \"ArrowLeft\":\n        return findParentTr(selectedTr);\n      case \"ArrowRight\":\n        return findExpandableChildTr(selectedTr);\n    }\n  }\n\n  function getTrIndex(tr) {\n    return tr.sectionRowIndex;\n  }\n\n  function getTrNodeId(tr) {\n    const nodeId = parseInt(tr.getAttribute(\"data-nid\"));\n    return !isNaN(nodeId) ? nodeId : undefined;\n  }\n\n  function getTrNode(tr) {\n    const nodeId = getTrNodeId(tr);\n    if (nodeId) {\n      return controller.getNodeById(nodeId);\n    }\n  }\n\n  function findParentTr(childTr) {\n    const childNode = getTrNode(childTr);\n    const parentNodeId = childNode.parent.id;\n    if (parentNodeId) {\n      for (let index = getTrIndex(childTr) - 1; index >= 0; index--) {\n        const tr = tbody.rows[index];\n        if (getTrNodeId(tr) === parentNodeId) {\n          return tr;\n        }\n      }\n    }\n  }\n\n  function findExpandableChildTr(parentTr) {\n    const parentNode = getTrNode(parentTr);\n    for (\n      let index = getTrIndex(parentTr) + 1;\n      index < tbody.rows.length;\n      index++\n    ) {\n      const childTr = tbody.rows[index];\n      const childNode = getTrNode(childTr);\n      if (childNode.parent !== parentNode) {\n        break;\n      }\n      if (childNode.firstChild) {\n        return childTr;\n      }\n    }\n  }\n}\n"],"sourceRoot":""}